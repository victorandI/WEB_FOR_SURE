{"ast":null,"code":"/*!\n * Module dependencies.\n */\n'use strict';\n\nconst Document = require('../../document');\n\nconst mongooseArrayMethods = require('./methods');\n\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\n\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\n\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\n\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\n\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\n/**\n * Mongoose Array constructor.\n *\n * #### Note:\n *\n * _Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._\n *\n * @param {Array} values\n * @param {String} path\n * @param {Document} doc parent document\n * @api private\n * @inherits Array\n * @see https://bit.ly/f6CnZU\n */\n\n\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\n\nfunction MongooseArray(values, path, doc, schematype) {\n  let __array;\n\n  if (Array.isArray(values)) {\n    const len = values.length; // Perf optimizations for small arrays: much faster to use `...` than `for` + `push`,\n    // but large arrays may cause stack overflows. And for arrays of length 0/1, just\n    // modifying the array is faster. Seems small, but adds up when you have a document\n    // with thousands of nested arrays.\n\n    if (len === 0) {\n      __array = new Array();\n    } else if (len === 1) {\n      __array = new Array(1);\n      __array[0] = values[0];\n    } else if (len < 10000) {\n      __array = new Array();\n\n      _basePush.apply(__array, values);\n    } else {\n      __array = new Array();\n\n      for (let i = 0; i < len; ++i) {\n        _basePush.call(__array, values[i]);\n      }\n    }\n  } else {\n    __array = [];\n  }\n\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: schematype,\n    [arrayParentSymbol]: void 0,\n    isMongooseArray: true,\n    isMongooseArrayProxy: true,\n    __array: __array\n  };\n\n  if (values && values[arrayAtomicsSymbol] != null) {\n    internals[arrayAtomicsSymbol] = values[arrayAtomicsSymbol];\n  } // Because doc comes from the context of another function, doc === global\n  // can happen if there was a null somewhere up the chain (see #3020)\n  // RB Jun 17, 2015 updated to check for presence of expected paths instead\n  // to make more proof against unusual node environments\n\n\n  if (doc != null && doc instanceof Document) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = schematype || doc.schema.path(path);\n  }\n\n  const proxy = new Proxy(__array, {\n    get: function (target, prop) {\n      if (internals.hasOwnProperty(prop)) {\n        return internals[prop];\n      }\n\n      if (mongooseArrayMethods.hasOwnProperty(prop)) {\n        return mongooseArrayMethods[prop];\n      }\n\n      return __array[prop];\n    },\n    set: function (target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        mongooseArrayMethods.set.call(proxy, prop, value, false);\n      } else if (internals.hasOwnProperty(prop)) {\n        internals[prop] = value;\n      } else {\n        __array[prop] = value;\n      }\n\n      return true;\n    }\n  });\n  return proxy;\n}\n/*!\n * Module exports.\n */\n\n\nmodule.exports = exports = MongooseArray;","map":{"version":3,"names":["Document","require","mongooseArrayMethods","arrayAtomicsSymbol","arrayAtomicsBackupSymbol","arrayParentSymbol","arrayPathSymbol","arraySchemaSymbol","_basePush","Array","prototype","push","numberRE","MongooseArray","values","path","doc","schematype","__array","isArray","len","length","apply","i","call","internals","isMongooseArray","isMongooseArrayProxy","schema","proxy","Proxy","get","target","prop","hasOwnProperty","set","value","test","module","exports"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/types/array/index.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst Document = require('../../document');\nconst mongooseArrayMethods = require('./methods');\n\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\n\n/**\n * Mongoose Array constructor.\n *\n * #### Note:\n *\n * _Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._\n *\n * @param {Array} values\n * @param {String} path\n * @param {Document} doc parent document\n * @api private\n * @inherits Array\n * @see https://bit.ly/f6CnZU\n */\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\n\nfunction MongooseArray(values, path, doc, schematype) {\n  let __array;\n\n  if (Array.isArray(values)) {\n    const len = values.length;\n\n    // Perf optimizations for small arrays: much faster to use `...` than `for` + `push`,\n    // but large arrays may cause stack overflows. And for arrays of length 0/1, just\n    // modifying the array is faster. Seems small, but adds up when you have a document\n    // with thousands of nested arrays.\n    if (len === 0) {\n      __array = new Array();\n    } else if (len === 1) {\n      __array = new Array(1);\n      __array[0] = values[0];\n    } else if (len < 10000) {\n      __array = new Array();\n      _basePush.apply(__array, values);\n    } else {\n      __array = new Array();\n      for (let i = 0; i < len; ++i) {\n        _basePush.call(__array, values[i]);\n      }\n    }\n  } else {\n    __array = [];\n  }\n\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: schematype,\n    [arrayParentSymbol]: void 0,\n    isMongooseArray: true,\n    isMongooseArrayProxy: true,\n    __array: __array\n  };\n\n  if (values && values[arrayAtomicsSymbol] != null) {\n    internals[arrayAtomicsSymbol] = values[arrayAtomicsSymbol];\n  }\n\n  // Because doc comes from the context of another function, doc === global\n  // can happen if there was a null somewhere up the chain (see #3020)\n  // RB Jun 17, 2015 updated to check for presence of expected paths instead\n  // to make more proof against unusual node environments\n  if (doc != null && doc instanceof Document) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = schematype || doc.schema.path(path);\n  }\n\n  const proxy = new Proxy(__array, {\n    get: function(target, prop) {\n      if (internals.hasOwnProperty(prop)) {\n        return internals[prop];\n      }\n      if (mongooseArrayMethods.hasOwnProperty(prop)) {\n        return mongooseArrayMethods[prop];\n      }\n\n      return __array[prop];\n    },\n    set: function(target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        mongooseArrayMethods.set.call(proxy, prop, value, false);\n      } else if (internals.hasOwnProperty(prop)) {\n        internals[prop] = value;\n      } else {\n        __array[prop] = value;\n      }\n\n      return true;\n    }\n  });\n\n  return proxy;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = exports = MongooseArray;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}