{"ast":null,"code":"'use strict';\n\nfunction getRelatedSchemaIndexes(model, schemaIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: schemaIndexes,\n    indexesType: 'schema'\n  });\n}\n\nfunction getRelatedDBIndexes(model, dbIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: dbIndexes,\n    indexesType: 'db'\n  });\n}\n\nmodule.exports = {\n  getRelatedSchemaIndexes,\n  getRelatedDBIndexes\n};\n\nfunction getRelatedIndexes(_ref) {\n  let {\n    baseModelName,\n    discriminatorMapping,\n    indexes,\n    indexesType\n  } = _ref;\n  const discriminatorKey = discriminatorMapping && discriminatorMapping.key;\n  const discriminatorValue = discriminatorMapping && discriminatorMapping.value;\n\n  if (!discriminatorKey) {\n    return indexes;\n  }\n\n  const isChildDiscriminatorModel = Boolean(baseModelName);\n\n  if (isChildDiscriminatorModel) {\n    return indexes.filter(index => {\n      const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n      return partialFilterExpression && partialFilterExpression[discriminatorKey] === discriminatorValue;\n    });\n  }\n\n  return indexes.filter(index => {\n    const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n    return !partialFilterExpression || !partialFilterExpression[discriminatorKey];\n  });\n}\n\nfunction getPartialFilterExpression(index, indexesType) {\n  if (indexesType === 'schema') {\n    const options = index[1];\n    return options && options.partialFilterExpression;\n  }\n\n  return index.partialFilterExpression;\n}","map":{"version":3,"names":["getRelatedSchemaIndexes","model","schemaIndexes","getRelatedIndexes","baseModelName","discriminatorMapping","schema","indexes","indexesType","getRelatedDBIndexes","dbIndexes","module","exports","discriminatorKey","key","discriminatorValue","value","isChildDiscriminatorModel","Boolean","filter","index","partialFilterExpression","getPartialFilterExpression","options"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/indexes/getRelatedIndexes.js"],"sourcesContent":["'use strict';\n\nfunction getRelatedSchemaIndexes(model, schemaIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: schemaIndexes,\n    indexesType: 'schema'\n  });\n}\n\nfunction getRelatedDBIndexes(model, dbIndexes) {\n  return getRelatedIndexes({\n    baseModelName: model.baseModelName,\n    discriminatorMapping: model.schema.discriminatorMapping,\n    indexes: dbIndexes,\n    indexesType: 'db'\n  });\n}\n\nmodule.exports = {\n  getRelatedSchemaIndexes,\n  getRelatedDBIndexes\n};\n\nfunction getRelatedIndexes({\n  baseModelName,\n  discriminatorMapping,\n  indexes,\n  indexesType\n}) {\n  const discriminatorKey = discriminatorMapping && discriminatorMapping.key;\n  const discriminatorValue = discriminatorMapping && discriminatorMapping.value;\n\n  if (!discriminatorKey) {\n    return indexes;\n  }\n\n  const isChildDiscriminatorModel = Boolean(baseModelName);\n  if (isChildDiscriminatorModel) {\n    return indexes.filter(index => {\n      const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n      return partialFilterExpression && partialFilterExpression[discriminatorKey] === discriminatorValue;\n    });\n  }\n\n  return indexes.filter(index => {\n    const partialFilterExpression = getPartialFilterExpression(index, indexesType);\n    return !partialFilterExpression || !partialFilterExpression[discriminatorKey];\n  });\n}\n\nfunction getPartialFilterExpression(index, indexesType) {\n  if (indexesType === 'schema') {\n    const options = index[1];\n    return options && options.partialFilterExpression;\n  }\n  return index.partialFilterExpression;\n}\n"],"mappings":"AAAA;;AAEA,SAASA,uBAAT,CAAiCC,KAAjC,EAAwCC,aAAxC,EAAuD;EACrD,OAAOC,iBAAiB,CAAC;IACvBC,aAAa,EAAEH,KAAK,CAACG,aADE;IAEvBC,oBAAoB,EAAEJ,KAAK,CAACK,MAAN,CAAaD,oBAFZ;IAGvBE,OAAO,EAAEL,aAHc;IAIvBM,WAAW,EAAE;EAJU,CAAD,CAAxB;AAMD;;AAED,SAASC,mBAAT,CAA6BR,KAA7B,EAAoCS,SAApC,EAA+C;EAC7C,OAAOP,iBAAiB,CAAC;IACvBC,aAAa,EAAEH,KAAK,CAACG,aADE;IAEvBC,oBAAoB,EAAEJ,KAAK,CAACK,MAAN,CAAaD,oBAFZ;IAGvBE,OAAO,EAAEG,SAHc;IAIvBF,WAAW,EAAE;EAJU,CAAD,CAAxB;AAMD;;AAEDG,MAAM,CAACC,OAAP,GAAiB;EACfZ,uBADe;EAEfS;AAFe,CAAjB;;AAKA,SAASN,iBAAT,OAKG;EAAA,IALwB;IACzBC,aADyB;IAEzBC,oBAFyB;IAGzBE,OAHyB;IAIzBC;EAJyB,CAKxB;EACD,MAAMK,gBAAgB,GAAGR,oBAAoB,IAAIA,oBAAoB,CAACS,GAAtE;EACA,MAAMC,kBAAkB,GAAGV,oBAAoB,IAAIA,oBAAoB,CAACW,KAAxE;;EAEA,IAAI,CAACH,gBAAL,EAAuB;IACrB,OAAON,OAAP;EACD;;EAED,MAAMU,yBAAyB,GAAGC,OAAO,CAACd,aAAD,CAAzC;;EACA,IAAIa,yBAAJ,EAA+B;IAC7B,OAAOV,OAAO,CAACY,MAAR,CAAeC,KAAK,IAAI;MAC7B,MAAMC,uBAAuB,GAAGC,0BAA0B,CAACF,KAAD,EAAQZ,WAAR,CAA1D;MACA,OAAOa,uBAAuB,IAAIA,uBAAuB,CAACR,gBAAD,CAAvB,KAA8CE,kBAAhF;IACD,CAHM,CAAP;EAID;;EAED,OAAOR,OAAO,CAACY,MAAR,CAAeC,KAAK,IAAI;IAC7B,MAAMC,uBAAuB,GAAGC,0BAA0B,CAACF,KAAD,EAAQZ,WAAR,CAA1D;IACA,OAAO,CAACa,uBAAD,IAA4B,CAACA,uBAAuB,CAACR,gBAAD,CAA3D;EACD,CAHM,CAAP;AAID;;AAED,SAASS,0BAAT,CAAoCF,KAApC,EAA2CZ,WAA3C,EAAwD;EACtD,IAAIA,WAAW,KAAK,QAApB,EAA8B;IAC5B,MAAMe,OAAO,GAAGH,KAAK,CAAC,CAAD,CAArB;IACA,OAAOG,OAAO,IAAIA,OAAO,CAACF,uBAA1B;EACD;;EACD,OAAOD,KAAK,CAACC,uBAAb;AACD"},"metadata":{},"sourceType":"script"}