{"ast":null,"code":"'use strict';\n\nconst helpers = require('../../queryhelpers');\n\nconst immediate = require('../immediate');\n\nmodule.exports = completeMany;\n/*!\n * Given a model and an array of docs, hydrates all the docs to be instances\n * of the model. Used to initialize docs returned from the db from `find()`\n *\n * @param {Model} model\n * @param {Array} docs\n * @param {Object} fields the projection used, including `select` from schemas\n * @param {Object} userProvidedFields the user-specified projection\n * @param {Object} opts\n * @param {Array} [opts.populated]\n * @param {ClientSession} [opts.session]\n * @param {Function} callback\n */\n\nfunction completeMany(model, docs, fields, userProvidedFields, opts, callback) {\n  const arr = [];\n  let count = docs.length;\n  const len = count;\n  let error = null;\n\n  function init(_error) {\n    if (_error != null) {\n      error = error || _error;\n    }\n\n    if (error != null) {\n      --count || immediate(() => callback(error));\n      return;\n    }\n\n    --count || immediate(() => callback(error, arr));\n  }\n\n  for (let i = 0; i < len; ++i) {\n    arr[i] = helpers.createModel(model, docs[i], fields, userProvidedFields);\n\n    try {\n      arr[i].$init(docs[i], opts, init);\n    } catch (error) {\n      init(error);\n    }\n\n    if (opts.session != null) {\n      arr[i].$session(opts.session);\n    }\n  }\n}","map":{"version":3,"names":["helpers","require","immediate","module","exports","completeMany","model","docs","fields","userProvidedFields","opts","callback","arr","count","length","len","error","init","_error","i","createModel","$init","session","$session"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/query/completeMany.js"],"sourcesContent":["'use strict';\n\nconst helpers = require('../../queryhelpers');\nconst immediate = require('../immediate');\n\nmodule.exports = completeMany;\n\n/*!\n * Given a model and an array of docs, hydrates all the docs to be instances\n * of the model. Used to initialize docs returned from the db from `find()`\n *\n * @param {Model} model\n * @param {Array} docs\n * @param {Object} fields the projection used, including `select` from schemas\n * @param {Object} userProvidedFields the user-specified projection\n * @param {Object} opts\n * @param {Array} [opts.populated]\n * @param {ClientSession} [opts.session]\n * @param {Function} callback\n */\n\nfunction completeMany(model, docs, fields, userProvidedFields, opts, callback) {\n  const arr = [];\n  let count = docs.length;\n  const len = count;\n  let error = null;\n\n  function init(_error) {\n    if (_error != null) {\n      error = error || _error;\n    }\n    if (error != null) {\n      --count || immediate(() => callback(error));\n      return;\n    }\n    --count || immediate(() => callback(error, arr));\n  }\n\n  for (let i = 0; i < len; ++i) {\n    arr[i] = helpers.createModel(model, docs[i], fields, userProvidedFields);\n    try {\n      arr[i].$init(docs[i], opts, init);\n    } catch (error) {\n      init(error);\n    }\n\n    if (opts.session != null) {\n      arr[i].$session(opts.session);\n    }\n  }\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,oBAAD,CAAvB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,cAAD,CAAzB;;AAEAE,MAAM,CAACC,OAAP,GAAiBC,YAAjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,MAAnC,EAA2CC,kBAA3C,EAA+DC,IAA/D,EAAqEC,QAArE,EAA+E;EAC7E,MAAMC,GAAG,GAAG,EAAZ;EACA,IAAIC,KAAK,GAAGN,IAAI,CAACO,MAAjB;EACA,MAAMC,GAAG,GAAGF,KAAZ;EACA,IAAIG,KAAK,GAAG,IAAZ;;EAEA,SAASC,IAAT,CAAcC,MAAd,EAAsB;IACpB,IAAIA,MAAM,IAAI,IAAd,EAAoB;MAClBF,KAAK,GAAGA,KAAK,IAAIE,MAAjB;IACD;;IACD,IAAIF,KAAK,IAAI,IAAb,EAAmB;MACjB,EAAEH,KAAF,IAAWX,SAAS,CAAC,MAAMS,QAAQ,CAACK,KAAD,CAAf,CAApB;MACA;IACD;;IACD,EAAEH,KAAF,IAAWX,SAAS,CAAC,MAAMS,QAAQ,CAACK,KAAD,EAAQJ,GAAR,CAAf,CAApB;EACD;;EAED,KAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,GAApB,EAAyB,EAAEI,CAA3B,EAA8B;IAC5BP,GAAG,CAACO,CAAD,CAAH,GAASnB,OAAO,CAACoB,WAAR,CAAoBd,KAApB,EAA2BC,IAAI,CAACY,CAAD,CAA/B,EAAoCX,MAApC,EAA4CC,kBAA5C,CAAT;;IACA,IAAI;MACFG,GAAG,CAACO,CAAD,CAAH,CAAOE,KAAP,CAAad,IAAI,CAACY,CAAD,CAAjB,EAAsBT,IAAtB,EAA4BO,IAA5B;IACD,CAFD,CAEE,OAAOD,KAAP,EAAc;MACdC,IAAI,CAACD,KAAD,CAAJ;IACD;;IAED,IAAIN,IAAI,CAACY,OAAL,IAAgB,IAApB,EAA0B;MACxBV,GAAG,CAACO,CAAD,CAAH,CAAOI,QAAP,CAAgBb,IAAI,CAACY,OAArB;IACD;EACF;AACF"},"metadata":{},"sourceType":"script"}