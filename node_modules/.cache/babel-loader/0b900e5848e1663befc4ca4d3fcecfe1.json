{"ast":null,"code":"'use strict';\n\nconst PromiseProvider = require('../promise_provider');\n\nconst immediate = require('./immediate');\n\nconst emittedSymbol = Symbol('mongoose:emitted');\n\nmodule.exports = function promiseOrCallback(callback, fn, ee, Promise) {\n  if (typeof callback === 'function') {\n    return fn(function (error) {\n      if (error != null) {\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n          error[emittedSymbol] = true;\n          ee.emit('error', error);\n        }\n\n        try {\n          callback(error);\n        } catch (error) {\n          return immediate(() => {\n            throw error;\n          });\n        }\n\n        return;\n      }\n\n      callback.apply(this, arguments);\n    });\n  }\n\n  Promise = Promise || PromiseProvider.get();\n  return new Promise((resolve, reject) => {\n    fn(function (error, res) {\n      if (error != null) {\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n          error[emittedSymbol] = true;\n          ee.emit('error', error);\n        }\n\n        return reject(error);\n      }\n\n      if (arguments.length > 2) {\n        return resolve(Array.prototype.slice.call(arguments, 1));\n      }\n\n      resolve(res);\n    });\n  });\n};","map":{"version":3,"names":["PromiseProvider","require","immediate","emittedSymbol","Symbol","module","exports","promiseOrCallback","callback","fn","ee","Promise","error","listeners","length","emit","apply","arguments","get","resolve","reject","res","Array","prototype","slice","call"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/promiseOrCallback.js"],"sourcesContent":["'use strict';\n\nconst PromiseProvider = require('../promise_provider');\nconst immediate = require('./immediate');\n\nconst emittedSymbol = Symbol('mongoose:emitted');\n\nmodule.exports = function promiseOrCallback(callback, fn, ee, Promise) {\n  if (typeof callback === 'function') {\n    return fn(function(error) {\n      if (error != null) {\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n          error[emittedSymbol] = true;\n          ee.emit('error', error);\n        }\n        try {\n          callback(error);\n        } catch (error) {\n          return immediate(() => {\n            throw error;\n          });\n        }\n        return;\n      }\n      callback.apply(this, arguments);\n    });\n  }\n\n  Promise = Promise || PromiseProvider.get();\n\n  return new Promise((resolve, reject) => {\n    fn(function(error, res) {\n      if (error != null) {\n        if (ee != null && ee.listeners != null && ee.listeners('error').length > 0 && !error[emittedSymbol]) {\n          error[emittedSymbol] = true;\n          ee.emit('error', error);\n        }\n        return reject(error);\n      }\n      if (arguments.length > 2) {\n        return resolve(Array.prototype.slice.call(arguments, 1));\n      }\n      resolve(res);\n    });\n  });\n};\n"],"mappings":"AAAA;;AAEA,MAAMA,eAAe,GAAGC,OAAO,CAAC,qBAAD,CAA/B;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,aAAD,CAAzB;;AAEA,MAAME,aAAa,GAAGC,MAAM,CAAC,kBAAD,CAA5B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,iBAAT,CAA2BC,QAA3B,EAAqCC,EAArC,EAAyCC,EAAzC,EAA6CC,OAA7C,EAAsD;EACrE,IAAI,OAAOH,QAAP,KAAoB,UAAxB,EAAoC;IAClC,OAAOC,EAAE,CAAC,UAASG,KAAT,EAAgB;MACxB,IAAIA,KAAK,IAAI,IAAb,EAAmB;QACjB,IAAIF,EAAE,IAAI,IAAN,IAAcA,EAAE,CAACG,SAAH,IAAgB,IAA9B,IAAsCH,EAAE,CAACG,SAAH,CAAa,OAAb,EAAsBC,MAAtB,GAA+B,CAArE,IAA0E,CAACF,KAAK,CAACT,aAAD,CAApF,EAAqG;UACnGS,KAAK,CAACT,aAAD,CAAL,GAAuB,IAAvB;UACAO,EAAE,CAACK,IAAH,CAAQ,OAAR,EAAiBH,KAAjB;QACD;;QACD,IAAI;UACFJ,QAAQ,CAACI,KAAD,CAAR;QACD,CAFD,CAEE,OAAOA,KAAP,EAAc;UACd,OAAOV,SAAS,CAAC,MAAM;YACrB,MAAMU,KAAN;UACD,CAFe,CAAhB;QAGD;;QACD;MACD;;MACDJ,QAAQ,CAACQ,KAAT,CAAe,IAAf,EAAqBC,SAArB;IACD,CAhBQ,CAAT;EAiBD;;EAEDN,OAAO,GAAGA,OAAO,IAAIX,eAAe,CAACkB,GAAhB,EAArB;EAEA,OAAO,IAAIP,OAAJ,CAAY,CAACQ,OAAD,EAAUC,MAAV,KAAqB;IACtCX,EAAE,CAAC,UAASG,KAAT,EAAgBS,GAAhB,EAAqB;MACtB,IAAIT,KAAK,IAAI,IAAb,EAAmB;QACjB,IAAIF,EAAE,IAAI,IAAN,IAAcA,EAAE,CAACG,SAAH,IAAgB,IAA9B,IAAsCH,EAAE,CAACG,SAAH,CAAa,OAAb,EAAsBC,MAAtB,GAA+B,CAArE,IAA0E,CAACF,KAAK,CAACT,aAAD,CAApF,EAAqG;UACnGS,KAAK,CAACT,aAAD,CAAL,GAAuB,IAAvB;UACAO,EAAE,CAACK,IAAH,CAAQ,OAAR,EAAiBH,KAAjB;QACD;;QACD,OAAOQ,MAAM,CAACR,KAAD,CAAb;MACD;;MACD,IAAIK,SAAS,CAACH,MAAV,GAAmB,CAAvB,EAA0B;QACxB,OAAOK,OAAO,CAACG,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BR,SAA3B,EAAsC,CAAtC,CAAD,CAAd;MACD;;MACDE,OAAO,CAACE,GAAD,CAAP;IACD,CAZC,CAAF;EAaD,CAdM,CAAP;AAeD,CAtCD"},"metadata":{},"sourceType":"script"}