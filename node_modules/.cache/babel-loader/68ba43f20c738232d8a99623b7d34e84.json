{"ast":null,"code":"'use strict';\n\nconst Decimal = require('../types/decimal128');\n\nconst ObjectId = require('../types/objectid');\n\nconst specialProperties = require('./specialProperties');\n\nconst isMongooseObject = require('./isMongooseObject');\n\nconst getFunctionName = require('./getFunctionName');\n\nconst isBsonType = require('./isBsonType');\n\nconst isObject = require('./isObject');\n\nconst symbols = require('./symbols');\n\nconst trustedSymbol = require('./query/trusted').trustedSymbol;\n\nconst utils = require('../utils');\n/*!\n * Object clone with Mongoose natives support.\n *\n * If options.minimize is true, creates a minimal data object. Empty objects and undefined values will not be cloned. This makes the data payload sent to MongoDB as small as possible.\n *\n * Functions are never cloned.\n *\n * @param {Object} obj the object to clone\n * @param {Object} options\n * @param {Boolean} isArrayChild true if cloning immediately underneath an array. Special case for minimize.\n * @return {Object} the cloned object\n * @api private\n */\n\n\nfunction clone(obj, options, isArrayChild) {\n  if (obj == null) {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return cloneArray(utils.isMongooseArray(obj) ? obj.__array : obj, options);\n  }\n\n  if (isMongooseObject(obj)) {\n    // Single nested subdocs should apply getters later in `applyGetters()`\n    // when calling `toObject()`. See gh-7442, gh-8295\n    if (options && options._skipSingleNestedGetters && obj.$isSingleNested) {\n      options = Object.assign({}, options, {\n        getters: false\n      });\n    }\n\n    const isSingleNested = obj.$isSingleNested;\n\n    if (utils.isPOJO(obj) && obj.$__ != null && obj._doc != null) {\n      return obj._doc;\n    }\n\n    let ret;\n\n    if (options && options.json && typeof obj.toJSON === 'function') {\n      ret = obj.toJSON(options);\n    } else {\n      ret = obj.toObject(options);\n    }\n\n    if (options && options.minimize && isSingleNested && Object.keys(ret).length === 0) {\n      return undefined;\n    }\n\n    return ret;\n  }\n\n  const objConstructor = obj.constructor;\n\n  if (objConstructor) {\n    switch (getFunctionName(objConstructor)) {\n      case 'Object':\n        return cloneObject(obj, options, isArrayChild);\n\n      case 'Date':\n        return new objConstructor(+obj);\n\n      case 'RegExp':\n        return cloneRegExp(obj);\n\n      default:\n        // ignore\n        break;\n    }\n  }\n\n  if (isBsonType(obj, 'ObjectID')) {\n    return new ObjectId(obj.id);\n  }\n\n  if (isBsonType(obj, 'Decimal128')) {\n    if (options && options.flattenDecimals) {\n      return obj.toJSON();\n    }\n\n    return Decimal.fromString(obj.toString());\n  } // object created with Object.create(null)\n\n\n  if (!objConstructor && isObject(obj)) {\n    return cloneObject(obj, options, isArrayChild);\n  }\n\n  if (typeof obj === 'object' && obj[symbols.schemaTypeSymbol]) {\n    return obj.clone();\n  } // If we're cloning this object to go into a MongoDB command,\n  // and there's a `toBSON()` function, assume this object will be\n  // stored as a primitive in MongoDB and doesn't need to be cloned.\n\n\n  if (options && options.bson && typeof obj.toBSON === 'function') {\n    return obj;\n  }\n\n  if (typeof obj.valueOf === 'function') {\n    return obj.valueOf();\n  }\n\n  return cloneObject(obj, options, isArrayChild);\n}\n\nmodule.exports = clone;\n/*!\n * ignore\n */\n\nfunction cloneObject(obj, options, isArrayChild) {\n  const minimize = options && options.minimize;\n  const omitUndefined = options && options.omitUndefined;\n  const seen = options && options._seen;\n  const ret = {};\n  let hasKeys;\n\n  if (seen && seen.has(obj)) {\n    return seen.get(obj);\n  } else if (seen) {\n    seen.set(obj, ret);\n  }\n\n  if (trustedSymbol in obj) {\n    ret[trustedSymbol] = obj[trustedSymbol];\n  }\n\n  let i = 0;\n  let key = '';\n  const keys = Object.keys(obj);\n  const len = keys.length;\n\n  for (i = 0; i < len; ++i) {\n    if (specialProperties.has(key = keys[i])) {\n      continue;\n    } // Don't pass `isArrayChild` down\n\n\n    const val = clone(obj[key], options, false);\n\n    if ((minimize === false || omitUndefined) && typeof val === 'undefined') {\n      delete ret[key];\n    } else if (minimize !== true || typeof val !== 'undefined') {\n      hasKeys || (hasKeys = true);\n      ret[key] = val;\n    }\n  }\n\n  return minimize && !isArrayChild ? hasKeys && ret : ret;\n}\n\nfunction cloneArray(arr, options) {\n  let i = 0;\n  const len = arr.length;\n  const ret = new Array(len);\n\n  for (i = 0; i < len; ++i) {\n    ret[i] = clone(arr[i], options, true);\n  }\n\n  return ret;\n}\n\nfunction cloneRegExp(regexp) {\n  const ret = new RegExp(regexp.source, regexp.flags);\n\n  if (ret.lastIndex !== regexp.lastIndex) {\n    ret.lastIndex = regexp.lastIndex;\n  }\n\n  return ret;\n}","map":{"version":3,"names":["Decimal","require","ObjectId","specialProperties","isMongooseObject","getFunctionName","isBsonType","isObject","symbols","trustedSymbol","utils","clone","obj","options","isArrayChild","Array","isArray","cloneArray","isMongooseArray","__array","_skipSingleNestedGetters","$isSingleNested","Object","assign","getters","isSingleNested","isPOJO","$__","_doc","ret","json","toJSON","toObject","minimize","keys","length","undefined","objConstructor","constructor","cloneObject","cloneRegExp","id","flattenDecimals","fromString","toString","schemaTypeSymbol","bson","toBSON","valueOf","module","exports","omitUndefined","seen","_seen","hasKeys","has","get","set","i","key","len","val","arr","regexp","RegExp","source","flags","lastIndex"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/clone.js"],"sourcesContent":["'use strict';\n\nconst Decimal = require('../types/decimal128');\nconst ObjectId = require('../types/objectid');\nconst specialProperties = require('./specialProperties');\nconst isMongooseObject = require('./isMongooseObject');\nconst getFunctionName = require('./getFunctionName');\nconst isBsonType = require('./isBsonType');\nconst isObject = require('./isObject');\nconst symbols = require('./symbols');\nconst trustedSymbol = require('./query/trusted').trustedSymbol;\nconst utils = require('../utils');\n\n\n/*!\n * Object clone with Mongoose natives support.\n *\n * If options.minimize is true, creates a minimal data object. Empty objects and undefined values will not be cloned. This makes the data payload sent to MongoDB as small as possible.\n *\n * Functions are never cloned.\n *\n * @param {Object} obj the object to clone\n * @param {Object} options\n * @param {Boolean} isArrayChild true if cloning immediately underneath an array. Special case for minimize.\n * @return {Object} the cloned object\n * @api private\n */\n\nfunction clone(obj, options, isArrayChild) {\n  if (obj == null) {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return cloneArray(utils.isMongooseArray(obj) ? obj.__array : obj, options);\n  }\n\n  if (isMongooseObject(obj)) {\n    // Single nested subdocs should apply getters later in `applyGetters()`\n    // when calling `toObject()`. See gh-7442, gh-8295\n    if (options && options._skipSingleNestedGetters && obj.$isSingleNested) {\n      options = Object.assign({}, options, { getters: false });\n    }\n    const isSingleNested = obj.$isSingleNested;\n\n    if (utils.isPOJO(obj) && obj.$__ != null && obj._doc != null) {\n      return obj._doc;\n    }\n\n    let ret;\n    if (options && options.json && typeof obj.toJSON === 'function') {\n      ret = obj.toJSON(options);\n    } else {\n      ret = obj.toObject(options);\n    }\n\n    if (options && options.minimize && isSingleNested && Object.keys(ret).length === 0) {\n      return undefined;\n    }\n\n    return ret;\n  }\n\n  const objConstructor = obj.constructor;\n\n  if (objConstructor) {\n    switch (getFunctionName(objConstructor)) {\n      case 'Object':\n        return cloneObject(obj, options, isArrayChild);\n      case 'Date':\n        return new objConstructor(+obj);\n      case 'RegExp':\n        return cloneRegExp(obj);\n      default:\n        // ignore\n        break;\n    }\n  }\n\n  if (isBsonType(obj, 'ObjectID')) {\n    return new ObjectId(obj.id);\n  }\n\n  if (isBsonType(obj, 'Decimal128')) {\n    if (options && options.flattenDecimals) {\n      return obj.toJSON();\n    }\n    return Decimal.fromString(obj.toString());\n  }\n\n  // object created with Object.create(null)\n  if (!objConstructor && isObject(obj)) {\n    return cloneObject(obj, options, isArrayChild);\n  }\n\n  if (typeof obj === 'object' && obj[symbols.schemaTypeSymbol]) {\n    return obj.clone();\n  }\n\n  // If we're cloning this object to go into a MongoDB command,\n  // and there's a `toBSON()` function, assume this object will be\n  // stored as a primitive in MongoDB and doesn't need to be cloned.\n  if (options && options.bson && typeof obj.toBSON === 'function') {\n    return obj;\n  }\n\n  if (typeof obj.valueOf === 'function') {\n    return obj.valueOf();\n  }\n\n  return cloneObject(obj, options, isArrayChild);\n}\nmodule.exports = clone;\n\n/*!\n * ignore\n */\n\nfunction cloneObject(obj, options, isArrayChild) {\n  const minimize = options && options.minimize;\n  const omitUndefined = options && options.omitUndefined;\n  const seen = options && options._seen;\n  const ret = {};\n  let hasKeys;\n\n  if (seen && seen.has(obj)) {\n    return seen.get(obj);\n  } else if (seen) {\n    seen.set(obj, ret);\n  }\n  if (trustedSymbol in obj) {\n    ret[trustedSymbol] = obj[trustedSymbol];\n  }\n\n  let i = 0;\n  let key = '';\n  const keys = Object.keys(obj);\n  const len = keys.length;\n\n  for (i = 0; i < len; ++i) {\n    if (specialProperties.has(key = keys[i])) {\n      continue;\n    }\n\n    // Don't pass `isArrayChild` down\n    const val = clone(obj[key], options, false);\n\n    if ((minimize === false || omitUndefined) && typeof val === 'undefined') {\n      delete ret[key];\n    } else if (minimize !== true || (typeof val !== 'undefined')) {\n      hasKeys || (hasKeys = true);\n      ret[key] = val;\n    }\n  }\n\n  return minimize && !isArrayChild ? hasKeys && ret : ret;\n}\n\nfunction cloneArray(arr, options) {\n  let i = 0;\n  const len = arr.length;\n  const ret = new Array(len);\n  for (i = 0; i < len; ++i) {\n    ret[i] = clone(arr[i], options, true);\n  }\n\n  return ret;\n}\n\nfunction cloneRegExp(regexp) {\n  const ret = new RegExp(regexp.source, regexp.flags);\n\n  if (ret.lastIndex !== regexp.lastIndex) {\n    ret.lastIndex = regexp.lastIndex;\n  }\n  return ret;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}