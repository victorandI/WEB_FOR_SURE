{"ast":null,"code":"'use strict';\n\nconst hasDollarKeys = require('./hasDollarKeys');\n\nconst {\n  trustedSymbol\n} = require('./trusted');\n\nmodule.exports = function sanitizeFilter(filter) {\n  if (filter == null || typeof filter !== 'object') {\n    return filter;\n  }\n\n  if (Array.isArray(filter)) {\n    for (const subfilter of filter) {\n      sanitizeFilter(subfilter);\n    }\n\n    return filter;\n  }\n\n  const filterKeys = Object.keys(filter);\n\n  for (const key of filterKeys) {\n    const value = filter[key];\n\n    if (value != null && value[trustedSymbol]) {\n      continue;\n    }\n\n    if (key === '$and' || key === '$or') {\n      sanitizeFilter(value);\n      continue;\n    }\n\n    if (hasDollarKeys(value)) {\n      const keys = Object.keys(value);\n\n      if (keys.length === 1 && keys[0] === '$eq') {\n        continue;\n      }\n\n      filter[key] = {\n        $eq: filter[key]\n      };\n    }\n  }\n\n  return filter;\n};","map":{"version":3,"names":["hasDollarKeys","require","trustedSymbol","module","exports","sanitizeFilter","filter","Array","isArray","subfilter","filterKeys","Object","keys","key","value","length","$eq"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/query/sanitizeFilter.js"],"sourcesContent":["'use strict';\n\nconst hasDollarKeys = require('./hasDollarKeys');\nconst { trustedSymbol } = require('./trusted');\n\nmodule.exports = function sanitizeFilter(filter) {\n  if (filter == null || typeof filter !== 'object') {\n    return filter;\n  }\n  if (Array.isArray(filter)) {\n    for (const subfilter of filter) {\n      sanitizeFilter(subfilter);\n    }\n    return filter;\n  }\n\n  const filterKeys = Object.keys(filter);\n  for (const key of filterKeys) {\n    const value = filter[key];\n    if (value != null && value[trustedSymbol]) {\n      continue;\n    }\n    if (key === '$and' || key === '$or') {\n      sanitizeFilter(value);\n      continue;\n    }\n\n    if (hasDollarKeys(value)) {\n      const keys = Object.keys(value);\n      if (keys.length === 1 && keys[0] === '$eq') {\n        continue;\n      }\n      filter[key] = { $eq: filter[key] };\n    }\n  }\n\n  return filter;\n};"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,iBAAD,CAA7B;;AACA,MAAM;EAAEC;AAAF,IAAoBD,OAAO,CAAC,WAAD,CAAjC;;AAEAE,MAAM,CAACC,OAAP,GAAiB,SAASC,cAAT,CAAwBC,MAAxB,EAAgC;EAC/C,IAAIA,MAAM,IAAI,IAAV,IAAkB,OAAOA,MAAP,KAAkB,QAAxC,EAAkD;IAChD,OAAOA,MAAP;EACD;;EACD,IAAIC,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAJ,EAA2B;IACzB,KAAK,MAAMG,SAAX,IAAwBH,MAAxB,EAAgC;MAC9BD,cAAc,CAACI,SAAD,CAAd;IACD;;IACD,OAAOH,MAAP;EACD;;EAED,MAAMI,UAAU,GAAGC,MAAM,CAACC,IAAP,CAAYN,MAAZ,CAAnB;;EACA,KAAK,MAAMO,GAAX,IAAkBH,UAAlB,EAA8B;IAC5B,MAAMI,KAAK,GAAGR,MAAM,CAACO,GAAD,CAApB;;IACA,IAAIC,KAAK,IAAI,IAAT,IAAiBA,KAAK,CAACZ,aAAD,CAA1B,EAA2C;MACzC;IACD;;IACD,IAAIW,GAAG,KAAK,MAAR,IAAkBA,GAAG,KAAK,KAA9B,EAAqC;MACnCR,cAAc,CAACS,KAAD,CAAd;MACA;IACD;;IAED,IAAId,aAAa,CAACc,KAAD,CAAjB,EAA0B;MACxB,MAAMF,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYE,KAAZ,CAAb;;MACA,IAAIF,IAAI,CAACG,MAAL,KAAgB,CAAhB,IAAqBH,IAAI,CAAC,CAAD,CAAJ,KAAY,KAArC,EAA4C;QAC1C;MACD;;MACDN,MAAM,CAACO,GAAD,CAAN,GAAc;QAAEG,GAAG,EAAEV,MAAM,CAACO,GAAD;MAAb,CAAd;IACD;EACF;;EAED,OAAOP,MAAP;AACD,CAhCD"},"metadata":{},"sourceType":"script"}