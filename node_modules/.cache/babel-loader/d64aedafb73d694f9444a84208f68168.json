{"ast":null,"code":"var _jsxFileName = \"B:\\\\web_project_react\\\\web_car_react\\\\src\\\\component\\\\car_info\\\\car_info.js\",\n    _s = $RefreshSig$();\n\nimport './car_info.css';\nimport { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CarInfo = () => {\n  _s();\n\n  const [CarInfo, setAllProductsList] = useState([]);\n\n  const getCar = async url => {\n    fetch(url, {\n      method: 'GET'\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        alert(\"something is wrong\");\n      }\n    }).then(data => {\n      setAllProductsList(data);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const [isAdmin, setUserType] = useState(true);\n  useEffect(() => {\n    getCar('http://127.0.0.1:5000/api/v1/car/' + localStorage.getItem('car_id'));\n    console.log(localStorage.getItem('user_status') == \"Admin\");\n\n    if (localStorage.getItem('user_status') == \"Admin\") {\n      setUserType(true);\n    } else {\n      setUserType(false);\n    }\n  }, []);\n\n  const makeReservation = async () => {\n    const authToken = localStorage.getItem('token');\n\n    if (authToken === \"null\") {\n      alert(\"please log in to the site\");\n      return;\n    }\n\n    const start_time = localStorage.getItem('time_start');\n    const stop_time = localStorage.getItem('time_stop');\n    console.log(start_time, stop_time);\n\n    if (start_time === \"undefined\" || stop_time === \"undefined\") {\n      alert(\"you did not choose the time\");\n      return;\n    }\n\n    const data = {\n      \"startDate\": start_time,\n      \"endDate\": stop_time,\n      \"sum\": CarInfo.price * (diffDays + 1),\n      \"idUser\": parseInt(localStorage.getItem('idUser')),\n      \"idCar\": CarInfo.idCar\n    };\n    const res = await fetch(\"http://127.0.0.1:5000/api/v1/service\", {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer ' + authToken\n      },\n      body: JSON.stringify(data)\n    });\n\n    if (res.ok) {\n      alert(\"Reservation successful\");\n      window.location.reload();\n    } else {\n      alert(\"something is wrong\");\n    }\n\n    ;\n  };\n\n  const date1 = new Date(localStorage.getItem('time_start'));\n  const date2 = new Date(localStorage.getItem('time_stop'));\n  const diffTime = Math.abs(date2 - date1);\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  var days;\n\n  if (isNaN(diffDays)) {\n    days = 0;\n  } else {\n    days = diffDays;\n  }\n\n  const sentDelRequest = async () => {\n    const authToken = localStorage.getItem('token');\n    const url = \"http://127.0.0.1:5000/api/v1/car/\" + localStorage.getItem('car_id');\n    const res = await fetch(url, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': 'Bearer ' + authToken\n      }\n    });\n\n    if (res.ok) {\n      alert(\"delete successful\");\n      localStorage.setItem('car_id', \"null\");\n      window.location.reload();\n    } else {\n      alert(\"something is wrong\");\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"car_list\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"car_list_row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"car_list_col1\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: CarInfo.imgUrl,\n          width: \"650\",\n          height: \"330\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"car_list_col2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: CarInfo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"This project was designed for one of the biggest Swiss entertainment centers that grew in popularity in 2009. Everything was completed in less than a month.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"divade_line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"car_info\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\" Rent for \", days + 1, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\" Total price \", CarInfo.price * (days + 1), \"$\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"rent\",\n          onClick: makeReservation,\n          children: \"RENT NOW\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: `delete_car_${isAdmin ? \"opacity\" : \"unopacity\"}`,\n        onClick: deleteCar,\n        children: \"Delete Car\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CarInfo, \"jRBNZwVAn5vhFC1sE7hUyNqNe9s=\");\n\n_c = CarInfo;\nexport default CarInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarInfo\");","map":{"version":3,"names":["useEffect","useState","CarInfo","setAllProductsList","getCar","url","fetch","method","then","res","ok","json","alert","data","catch","err","console","error","isAdmin","setUserType","localStorage","getItem","log","makeReservation","authToken","start_time","stop_time","price","diffDays","parseInt","idCar","headers","body","JSON","stringify","window","location","reload","date1","Date","date2","diffTime","Math","abs","ceil","days","isNaN","sentDelRequest","setItem","imgUrl","name","deleteCar"],"sources":["B:/web_project_react/web_car_react/src/component/car_info/car_info.js"],"sourcesContent":["import './car_info.css';\r\nimport {useEffect, useState} from 'react';\r\n\r\nconst CarInfo = () => {\r\n    const [CarInfo, setAllProductsList] = useState([]);\r\n    const getCar = async (url) => {\r\n        fetch(url, {\r\n            method: 'GET',\r\n        })\r\n        .then(res=>{\r\n            if(res.ok){\r\n                return res.json()\r\n            }else{\r\n                alert(\"something is wrong\")\r\n            }\r\n        }).then(data =>{\r\n            setAllProductsList(data);\r\n            }\r\n        ).catch((err) => {\r\n            console.error(err)\r\n        }\r\n        );\r\n     }\r\n    const [isAdmin, setUserType] = useState(true);\r\n    useEffect(() => {\r\n        getCar('http://127.0.0.1:5000/api/v1/car/' + localStorage.getItem('car_id'))\r\n        console.log(localStorage.getItem('user_status') == \"Admin\")\r\n        if (localStorage.getItem('user_status') == \"Admin\"){\r\n\r\n            setUserType(true);\r\n        }else{\r\n\r\n            setUserType(false);\r\n        }\r\n    },[])\r\n\r\n\r\n    const makeReservation = async () => {\r\n        const authToken = localStorage.getItem('token');\r\n        if (authToken === \"null\"){\r\n            alert(\"please log in to the site\");\r\n            return;\r\n        }\r\n        const start_time = localStorage.getItem('time_start')\r\n        const stop_time = localStorage.getItem('time_stop')\r\n        console.log(start_time, stop_time)\r\n        if (start_time === \"undefined\" || stop_time === \"undefined\"){\r\n            alert(\"you did not choose the time\");\r\n            return;\r\n        }\r\n\r\n        const data = {  \"startDate\": start_time, \"endDate\":stop_time,\"sum\":CarInfo.price * (diffDays+1), \"idUser\":parseInt(localStorage.getItem('idUser')), \"idCar\":CarInfo.idCar};\r\n\r\n        const res = await fetch(\"http://127.0.0.1:5000/api/v1/service\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'Accept': 'application/json',\r\n                'Authorization': 'Bearer ' + authToken\r\n            },\r\n            body:JSON.stringify(data)});\r\n            if(res.ok){\r\n                alert(\"Reservation successful\");\r\n                window.location.reload();\r\n            }else{\r\n                \r\n                alert(\"something is wrong\")\r\n            };\r\n     }\r\n     const date1 = new Date(localStorage.getItem('time_start'))\r\n     const date2 = new Date(localStorage.getItem('time_stop'))\r\n     const diffTime = Math.abs(date2 - date1);\r\n     const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); \r\n     var days;\r\n     if (isNaN(diffDays)){\r\n        days = 0;\r\n     }else{\r\n        days = diffDays;\r\n     }\r\n\r\n     const sentDelRequest = async () => {\r\n        const authToken = localStorage.getItem('token');\r\n        const url =\"http://127.0.0.1:5000/api/v1/car/\" +  localStorage.getItem('car_id');\r\n        const res = await fetch(url, \r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + authToken\r\n            }\r\n        });\r\n        if(res.ok){\r\n            alert(\"delete successful\");\r\n            localStorage.setItem('car_id', \"null\");\r\n            window.location.reload();\r\n        }else{\r\n            \r\n            alert(\"something is wrong\")\r\n        }  ;\r\n     }\r\n\r\n    return(\r\n        <div className = \"car_list\">\r\n            <div className=\"car_list_row\">\r\n                <div className=\"car_list_col1\">\r\n                    <img src={CarInfo.imgUrl} width=\"650\" height=\"330\"/>\r\n                </div>\r\n                <div className=\"car_list_col2\">\r\n                    <h3>{CarInfo.name}</h3>\r\n                    <p>This project was designed for one of the biggest Swiss entertainment centers that \r\n                    grew in popularity in 2009. \r\n                    Everything was completed in less than a month.\r\n                    </p>\r\n                    <div className =\"divade_line\"></div>\r\n                    <div className =\"car_info\">\r\n                        <ul>\r\n                            <li> Rent for {days+1} days</li>\r\n                        </ul>\r\n                        <ul>\r\n                            <li> Total price {CarInfo.price * (days+1)}$</li>\r\n                        </ul>\r\n                    </div>\r\n                    <a className=\"rent\" onClick = {makeReservation}>RENT NOW</a>\r\n                    \r\n                </div>\r\n                <a className={`delete_car_${isAdmin  ? \"opacity\" : \"unopacity\"}` } onClick = {deleteCar}>Delete Car</a>\r\n            </div>\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default CarInfo;"],"mappings":"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"},"metadata":{},"sourceType":"module"}