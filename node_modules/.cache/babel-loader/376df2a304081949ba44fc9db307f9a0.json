{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\Downloads\\\\web_car_react-main (2)\\\\web_car_react-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'./login.css';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setLogin=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),passwordValid=_useState6[0],setPasswordValid=_useState6[1];var onChangeLogin=function onChangeLogin(event){setLogin(event.target.value);};var onChangePassword=function onChangePassword(event){setPassword(event.target.value);};useEffect(function(){setPasswordValid(false);},[password]);var find_user_id=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(login){var res,lol2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://127.0.0.1:5000/user/\"+login,{method:'GET',headers:{'Authorization':'Bearer '+localStorage.getItem('token')}});case 2:res=_context.sent;lol2='';if(!res.ok){_context.next=14;break;}_context.next=7;return res.json();case 7:lol2=_context.sent;console.log(lol2.idUser);localStorage.setItem('idUser',lol2.idUser);localStorage.setItem('user_status',lol2.user_status);window.location.reload();_context.next=15;break;case 14:alert(\"Could not verify\");case 15:case\"end\":return _context.stop();}}},_callee);}));return function find_user_id(_x){return _ref.apply(this,arguments);};}();var sentRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,res,lol;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(password.length>=5)){_context2.next=17;break;}data={\"login\":login,\"password\":password};//console.log(data)\n_context2.next=4;return fetch(\"http://127.0.0.1:5000/login\",{method:'POST',headers:{'Content-type':'application/json','Accept':'application/json'},body:JSON.stringify(data)});case 4:res=_context2.sent;lol='';if(!res.ok){_context2.next=14;break;}_context2.next=9;return res.json();case 9:lol=_context2.sent;localStorage.setItem('token',lol);find_user_id(login);//window.location.reload();\n_context2.next=16;break;case 14:localStorage.setItem('token',null);alert(\"Could not verify\");case 16:console.log(lol);case 17:case\"end\":return _context2.stop();}}},_callee2);}));return function sentRequest(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"main\",{className:\"main_login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main_head_login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main_section_login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome back\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login\",type:\"text\",placeholder:\"Username\",onChange:onChangeLogin}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",placeholder:\"Password\",onChange:onChangePassword}),passwordValid&&/*#__PURE__*/_jsx(\"p\",{children:\"Please enter your password > 4\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"log_button\",onClick:sentRequest,children:\"Login\"})]})})})});};export default Login;","map":{"version":3,"names":["useState","useEffect","Login","props","login","setLogin","password","setPassword","passwordValid","setPasswordValid","onChangeLogin","event","target","value","onChangePassword","find_user_id","fetch","method","headers","localStorage","getItem","res","lol2","ok","json","console","log","idUser","setItem","user_status","window","location","reload","alert","sentRequest","length","data","body","JSON","stringify","lol"],"sources":["C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/src/component/login/login.js"],"sourcesContent":["import './login.css';\nimport { useState, useEffect } from 'react';\n\nconst Login = (props) => {\n    const [login, setLogin] = useState();\n    const [password, setPassword] = useState();\n    const [passwordValid, setPasswordValid] = useState(false);\n\n    const onChangeLogin = (event) => {\n        setLogin(event.target.value);\n    }\n\n    const onChangePassword = (event) => {\n        setPassword(event.target.value);\n    }\n    \n    useEffect(() => {\n        setPasswordValid(false);\n    }, [password])\n\n    const find_user_id = async (login) => {\n        \n        //console.log(data)\n        const res = await fetch(\"http://127.0.0.1:5000/user/\" + login, \n        {\n        method: 'GET',\n        headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }});\n        let lol2 = '';\n        if(res.ok){\n            lol2 = await res.json();\n            console.log(lol2.idUser)\n            localStorage.setItem('idUser', lol2.idUser);\n            localStorage.setItem('user_status', lol2.user_status);\n            window.location.reload();\n        }else{\n            alert(\"Could not verify\")\n        }  \n    }\n\n    const sentRequest = async () => {\n       if(password.length >= 5){\n            const data = { \"login\":login, \"password\":password};\n            //console.log(data)\n            const res = await fetch(\"http://127.0.0.1:5000/login\", \n            {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n                'Accept': 'application/json'\n            },\n            body:JSON.stringify(data)});\n            let lol = '';\n            if(res.ok){\n                lol = await res.json();\n                localStorage.setItem('token', lol);\n                find_user_id(login)\n                //window.location.reload();\n            }else{\n                localStorage.setItem('token', null);\n                alert(\"Could not verify\")\n            }  \n            console.log(lol);\n        }\n\n    }\n    return (\n        <main className=\"main_login\">\n            <div className=\"main_head_login\">\n                <div className=\"main_section_login\">\n                    <div className=\"login\">\n                    <h2>Welcome back</h2>\n                    <input id = \"login\" type=\"text\" placeholder=\"Username\" onChange={onChangeLogin}/>\n                    <input id = \"password\" type=\"password\" placeholder=\"Password\" onChange={onChangePassword}/>\n                    {passwordValid && <p>Please enter your password &gt; 4</p>}\n                    <button type='submit' id = \"log_button\" onClick={sentRequest}>Login</button>\n                    </div>\n                </div>\n            </div>\n        </main>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}