{"ast":null,"code":"'use strict';\n\nconst isOperator = require('./isOperator');\n\nmodule.exports = function castFilterPath(query, schematype, val) {\n  const ctx = query;\n  const any$conditionals = Object.keys(val).some(isOperator);\n\n  if (!any$conditionals) {\n    return schematype.castForQueryWrapper({\n      val: val,\n      context: ctx\n    });\n  }\n\n  const ks = Object.keys(val);\n  let k = ks.length;\n\n  while (k--) {\n    const $cond = ks[k];\n    const nested = val[$cond];\n\n    if ($cond === '$not') {\n      if (nested && schematype && !schematype.caster) {\n        const _keys = Object.keys(nested);\n\n        if (_keys.length && isOperator(_keys[0])) {\n          for (const key of Object.keys(nested)) {\n            nested[key] = schematype.castForQueryWrapper({\n              $conditional: key,\n              val: nested[key],\n              context: ctx\n            });\n          }\n        } else {\n          val[$cond] = schematype.castForQueryWrapper({\n            $conditional: $cond,\n            val: nested,\n            context: ctx\n          });\n        }\n\n        continue;\n      }\n    } else {\n      val[$cond] = schematype.castForQueryWrapper({\n        $conditional: $cond,\n        val: nested,\n        context: ctx\n      });\n    }\n  }\n\n  return val;\n};","map":{"version":3,"names":["isOperator","require","module","exports","castFilterPath","query","schematype","val","ctx","any$conditionals","Object","keys","some","castForQueryWrapper","context","ks","k","length","$cond","nested","caster","_keys","key","$conditional"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/query/castFilterPath.js"],"sourcesContent":["'use strict';\n\nconst isOperator = require('./isOperator');\n\nmodule.exports = function castFilterPath(query, schematype, val) {\n  const ctx = query;\n  const any$conditionals = Object.keys(val).some(isOperator);\n\n  if (!any$conditionals) {\n    return schematype.castForQueryWrapper({\n      val: val,\n      context: ctx\n    });\n  }\n\n  const ks = Object.keys(val);\n\n  let k = ks.length;\n\n  while (k--) {\n    const $cond = ks[k];\n    const nested = val[$cond];\n\n    if ($cond === '$not') {\n      if (nested && schematype && !schematype.caster) {\n        const _keys = Object.keys(nested);\n        if (_keys.length && isOperator(_keys[0])) {\n          for (const key of Object.keys(nested)) {\n            nested[key] = schematype.castForQueryWrapper({\n              $conditional: key,\n              val: nested[key],\n              context: ctx\n            });\n          }\n        } else {\n          val[$cond] = schematype.castForQueryWrapper({\n            $conditional: $cond,\n            val: nested,\n            context: ctx\n          });\n        }\n        continue;\n      }\n    } else {\n      val[$cond] = schematype.castForQueryWrapper({\n        $conditional: $cond,\n        val: nested,\n        context: ctx\n      });\n    }\n  }\n\n  return val;\n};"],"mappings":"AAAA;;AAEA,MAAMA,UAAU,GAAGC,OAAO,CAAC,cAAD,CAA1B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,UAA/B,EAA2CC,GAA3C,EAAgD;EAC/D,MAAMC,GAAG,GAAGH,KAAZ;EACA,MAAMI,gBAAgB,GAAGC,MAAM,CAACC,IAAP,CAAYJ,GAAZ,EAAiBK,IAAjB,CAAsBZ,UAAtB,CAAzB;;EAEA,IAAI,CAACS,gBAAL,EAAuB;IACrB,OAAOH,UAAU,CAACO,mBAAX,CAA+B;MACpCN,GAAG,EAAEA,GAD+B;MAEpCO,OAAO,EAAEN;IAF2B,CAA/B,CAAP;EAID;;EAED,MAAMO,EAAE,GAAGL,MAAM,CAACC,IAAP,CAAYJ,GAAZ,CAAX;EAEA,IAAIS,CAAC,GAAGD,EAAE,CAACE,MAAX;;EAEA,OAAOD,CAAC,EAAR,EAAY;IACV,MAAME,KAAK,GAAGH,EAAE,CAACC,CAAD,CAAhB;IACA,MAAMG,MAAM,GAAGZ,GAAG,CAACW,KAAD,CAAlB;;IAEA,IAAIA,KAAK,KAAK,MAAd,EAAsB;MACpB,IAAIC,MAAM,IAAIb,UAAV,IAAwB,CAACA,UAAU,CAACc,MAAxC,EAAgD;QAC9C,MAAMC,KAAK,GAAGX,MAAM,CAACC,IAAP,CAAYQ,MAAZ,CAAd;;QACA,IAAIE,KAAK,CAACJ,MAAN,IAAgBjB,UAAU,CAACqB,KAAK,CAAC,CAAD,CAAN,CAA9B,EAA0C;UACxC,KAAK,MAAMC,GAAX,IAAkBZ,MAAM,CAACC,IAAP,CAAYQ,MAAZ,CAAlB,EAAuC;YACrCA,MAAM,CAACG,GAAD,CAAN,GAAchB,UAAU,CAACO,mBAAX,CAA+B;cAC3CU,YAAY,EAAED,GAD6B;cAE3Cf,GAAG,EAAEY,MAAM,CAACG,GAAD,CAFgC;cAG3CR,OAAO,EAAEN;YAHkC,CAA/B,CAAd;UAKD;QACF,CARD,MAQO;UACLD,GAAG,CAACW,KAAD,CAAH,GAAaZ,UAAU,CAACO,mBAAX,CAA+B;YAC1CU,YAAY,EAAEL,KAD4B;YAE1CX,GAAG,EAAEY,MAFqC;YAG1CL,OAAO,EAAEN;UAHiC,CAA/B,CAAb;QAKD;;QACD;MACD;IACF,CApBD,MAoBO;MACLD,GAAG,CAACW,KAAD,CAAH,GAAaZ,UAAU,CAACO,mBAAX,CAA+B;QAC1CU,YAAY,EAAEL,KAD4B;QAE1CX,GAAG,EAAEY,MAFqC;QAG1CL,OAAO,EAAEN;MAHiC,CAA/B,CAAb;IAKD;EACF;;EAED,OAAOD,GAAP;AACD,CAjDD"},"metadata":{},"sourceType":"script"}