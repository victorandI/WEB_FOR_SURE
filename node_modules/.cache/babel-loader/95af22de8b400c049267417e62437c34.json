{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\Downloads\\\\web_car_react-main (2)\\\\web_car_react-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'./cars.css';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cars=function Cars(props){var onAddCarHandler=function onAddCarHandler(){props.AddCarHandler();};var _useState=useState(\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"),_useState2=_slicedToArray(_useState,1),stylePath=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allCarsList=_useState4[0],setAllProductsList=_useState4[1];var getCars=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(url,{method:'GET'}).then(function(res){if(res.ok){return res.json();}else{alert(\"something is wrong\");}}).then(function(data){setAllProductsList(data);}).catch(function(err){console.error(err);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function getCars(_x){return _ref.apply(this,arguments);};}();var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setUserType=_useState6[1];useEffect(function(){getCars('http://127.0.0.1:5000/catalog');console.log(localStorage.getItem('user_status')==\"Admin\");if(localStorage.getItem('user_status')==\"Admin\"){setUserType(true);}else{setUserType(false);}},[]);var CarRentsHandler=function CarRentsHandler(car_id,time_start,time_stop){localStorage.setItem('car_id',car_id);localStorage.setItem('time_start',time_start);localStorage.setItem('time_stop',time_stop);props.carRentsHandler();};var _useState7=useState(\"false\"),_useState8=_slicedToArray(_useState7,2),isActive=_useState8[0],setActive=_useState8[1];var handleToggle=function handleToggle(){setActive(!isActive);};var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),sort=_useState10[0],setSort=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),start=_useState12[0],setStartTime=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),stop=_useState14[0],setStopTime=_useState14[1];var onChangeSort=function onChangeSort(event){setSort(event.target.value);};var onStartTime=function onStartTime(event){setStartTime(event.target.value);};var onStopTime=function onStopTime(event){setStopTime(event.target.value);};var apply_filter=function apply_filter(){handleToggle();if(start===undefined){setStartTime('undefined');}if(stop===undefined){setStopTime('undefined');}if(sort===undefined){setSort('undefined');}if(start===\"\"||stop===\"\"){getCars('http://127.0.0.1:5000/catalog/'+sort+'/undefined/undefined');}else{getCars('http://127.0.0.1:5000/catalog/'+sort+'/'+start+'/'+stop);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",type:\"text/css\",href:stylePath}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-bar\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"edit-car-\".concat(isAdmin?\"opacity\":\"unopacity\"),onClick:onAddCarHandler,children:\"Add new car\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"filter-dropdown\",onClick:handleToggle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-filter\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-dropdown-text\",children:\"Filter dataset\"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-filter-modal-\".concat(isActive?\"opacity\":\"unopacity\"),children:[/*#__PURE__*/_jsxs(\"select\",{id:\"sort_by\",onChange:onChangeSort,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Default\"}),/*#__PURE__*/_jsx(\"option\",{children:\"From cheap to expensive\"}),/*#__PURE__*/_jsx(\"option\",{children:\"From expensive to cheap\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Year, descending\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Year, ascending\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"start\",min:\"2020-01-01\",max:\"2024-12-31\",onChange:onStartTime}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"stop\",min:\"2020-01-01\",max:\"2024-12-31\",onChange:onStopTime}),/*#__PURE__*/_jsx(\"button\",{className:\"apply-button\",onClick:apply_filter,children:\"Apply\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-button\",onClick:handleToggle,children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cars\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cars_row\",children:allCarsList.map(function(car){return/*#__PURE__*/_jsxs(\"div\",{className:\"cars_col\",children:[/*#__PURE__*/_jsx(\"a\",{class:\"courses-image\",onClick:function onClick(){CarRentsHandler(car.idCar,start,stop);},children:/*#__PURE__*/_jsx(\"img\",{src:car.imgUrl,width:\"330\",height:\"180\",className:\"img-responsive\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cars_detail\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){CarRentsHandler(car.idCar,start,stop);},children:car.name})}),/*#__PURE__*/_jsxs(\"p\",{className:\"lead\",children:[\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",car.price]}),\" \",/*#__PURE__*/_jsx(\"small\",{children:\"per day\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[car.productionYear,\" year \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"courses-info\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){CarRentsHandler(car.idCar,start,stop);},children:\"Rent Now\"})})]});})})})]});};export default Cars;","map":{"version":3,"names":["useEffect","useState","Cars","props","onAddCarHandler","AddCarHandler","stylePath","allCarsList","setAllProductsList","getCars","url","fetch","method","then","res","ok","json","alert","data","catch","err","console","error","isAdmin","setUserType","log","localStorage","getItem","CarRentsHandler","car_id","time_start","time_stop","setItem","carRentsHandler","isActive","setActive","handleToggle","sort","setSort","start","setStartTime","stop","setStopTime","onChangeSort","event","target","value","onStartTime","onStopTime","apply_filter","undefined","map","car","idCar","imgUrl","name","price","productionYear"],"sources":["C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/src/component/cars/cars.js"],"sourcesContent":["import './cars.css';\nimport {useEffect, useState} from 'react';\n\n\nconst Cars  = (props) => {\n    const onAddCarHandler = () => {\n        props.AddCarHandler();\n    }\n    const [stylePath] = useState(\n        \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"\n      );\n    const [allCarsList, setAllProductsList] = useState([]);\n    const getCars = async (url) => {\n        fetch(url, {\n            method: 'GET',\n        })\n        .then(res=>{\n            if(res.ok){\n                return res.json()\n            }else{\n                alert(\"something is wrong\")\n            }\n        }).then(data =>{\n            setAllProductsList(data);\n            \n            }\n        ).catch((err) => {\n            console.error(err)\n        }\n        );\n     }\n    const [isAdmin, setUserType] = useState(true);\n    useEffect(() => {\n        getCars('http://127.0.0.1:5000/catalog')\n        console.log(localStorage.getItem('user_status') == \"Admin\")\n        if (localStorage.getItem('user_status') == \"Admin\"){\n\n            setUserType(true);\n        }else{\n\n            setUserType(false);\n        }\n    },[])\n    \n    const CarRentsHandler = (car_id, time_start, time_stop) => {\n        localStorage.setItem('car_id', car_id);\n        localStorage.setItem('time_start', time_start);\n        localStorage.setItem('time_stop', time_stop);\n        props.carRentsHandler();\n    }\n    \n    const [isActive, setActive] = useState(\"false\");\n\n    const handleToggle = () => {\n      setActive(!isActive);\n    };\n    \n    const [sort, setSort] = useState();\n    const [start, setStartTime] = useState();\n    const [stop, setStopTime] = useState();\n\n    const onChangeSort = (event) => {\n        setSort(event.target.value);\n    }\n\n    const onStartTime = (event) => {\n        setStartTime(event.target.value);\n    }\n    \n    const onStopTime = (event) => {\n        setStopTime(event.target.value);\n    }\n\n    const apply_filter = () => { \n        handleToggle()\n\n        if (start === undefined){\n            setStartTime('undefined')\n        }\n        if (stop === undefined ){\n            setStopTime('undefined')\n        }\n        if (sort === undefined){\n            setSort('undefined')\n        } \n        if (start === \"\" || stop === \"\"){\n            getCars('http://127.0.0.1:5000/catalog/'+sort+'/undefined/undefined')\n        }else{\n            getCars('http://127.0.0.1:5000/catalog/'+sort+'/'+start+'/'+stop)\n        }\n\n    }\n    return(\n    <div>  \n        <link rel=\"stylesheet\" type=\"text/css\" href={stylePath} />\n        <div className=\"filter-section\">\n        <div className=\"filter-bar\">\n            <a className={`edit-car-${isAdmin  ? \"opacity\" : \"unopacity\"}`} onClick={onAddCarHandler} >Add new car</a>\n            <a className=\"filter-dropdown\"  onClick={handleToggle}>\n            <i className=\"fa fa-filter\" aria-hidden=\"true\"></i>\n            <span className=\"filter-dropdown-text\">Filter dataset</span> </a>\n        </div>\n\n        <div className={`edit-filter-modal-${isActive ? \"opacity\" : \"unopacity\"}`}>\n            <select id = 'sort_by' onChange={onChangeSort}>\n            <option>Default</option>\n            <option>From cheap to expensive</option>\n            <option>From expensive to cheap</option>\n            <option>Year, descending</option>\n            <option>Year, ascending</option>\n            </select>\n            <input type=\"date\" id = 'start' min=\"2020-01-01\" max=\"2024-12-31\" onChange={onStartTime}/>\n            <input type=\"date\" id = 'stop' min=\"2020-01-01\" max=\"2024-12-31\" onChange={onStopTime}/>\n            <button className=\"apply-button\" onClick={apply_filter}>Apply</button>\n            <button className=\"text-button\" onClick={handleToggle}>Cancel</button>\n        </div>\n        </div>\n        <div className=\"cars\">\n\n          <div className=\"cars_row\">\n          {allCarsList.map(car =>\n            <div className=\"cars_col\">\n                <a class=\"courses-image\" onClick={ () => {\n                    CarRentsHandler(car.idCar, start, stop)\n                }}>\n                    <img src={car.imgUrl} width=\"330\" height=\"180\" className=\"img-responsive\" alt=\"\"/>\n                </a>\n                <div className=\"cars_detail\">\n                    <h3><a onClick={ () => {\n                    CarRentsHandler(car.idCar, start, stop)\n                }}>{car.name}</a></h3>\n                    <p className=\"lead\"> <strong>${car.price}</strong> <small>per day</small></p>\n                    <p>{car.productionYear} year </p>\n                </div>\n                <div className=\"courses-info\">\n                <a onClick={ () => {\n                    CarRentsHandler(car.idCar, start, stop)\n                }}>Rent Now</a>\n                </div> \n            </div>   \n            )}\n          </div>\n\n        </div>\n    </div>\n    )\n}\n\nexport default Cars;"],"mappings":"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"},"metadata":{},"sourceType":"module"}