{"ast":null,"code":"'use strict';\n\nconst StrictModeError = require('../../error/strict');\n/*!\n * ignore\n */\n\n\nmodule.exports = function (schematype) {\n  if (schematype.$immutable) {\n    schematype.$immutableSetter = createImmutableSetter(schematype.path, schematype.options.immutable);\n    schematype.set(schematype.$immutableSetter);\n  } else if (schematype.$immutableSetter) {\n    schematype.setters = schematype.setters.filter(fn => fn !== schematype.$immutableSetter);\n    delete schematype.$immutableSetter;\n  }\n};\n\nfunction createImmutableSetter(path, immutable) {\n  return function immutableSetter(v, _priorVal, _doc, options) {\n    if (this == null || this.$__ == null) {\n      return v;\n    }\n\n    if (this.isNew) {\n      return v;\n    }\n\n    if (options && options.overwriteImmutable) {\n      return v;\n    }\n\n    const _immutable = typeof immutable === 'function' ? immutable.call(this, this) : immutable;\n\n    if (!_immutable) {\n      return v;\n    }\n\n    const _value = this.$__.priorDoc != null ? this.$__.priorDoc.$__getValue(path) : this.$__getValue(path);\n\n    if (this.$__.strictMode === 'throw' && v !== _value) {\n      throw new StrictModeError(path, 'Path `' + path + '` is immutable ' + 'and strict mode is set to throw.', true);\n    }\n\n    return _value;\n  };\n}","map":{"version":3,"names":["StrictModeError","require","module","exports","schematype","$immutable","$immutableSetter","createImmutableSetter","path","options","immutable","set","setters","filter","fn","immutableSetter","v","_priorVal","_doc","$__","isNew","overwriteImmutable","_immutable","call","_value","priorDoc","$__getValue","strictMode"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/schematype/handleImmutable.js"],"sourcesContent":["'use strict';\n\nconst StrictModeError = require('../../error/strict');\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schematype) {\n  if (schematype.$immutable) {\n    schematype.$immutableSetter = createImmutableSetter(schematype.path,\n      schematype.options.immutable);\n    schematype.set(schematype.$immutableSetter);\n  } else if (schematype.$immutableSetter) {\n    schematype.setters = schematype.setters.\n      filter(fn => fn !== schematype.$immutableSetter);\n    delete schematype.$immutableSetter;\n  }\n};\n\nfunction createImmutableSetter(path, immutable) {\n  return function immutableSetter(v, _priorVal, _doc, options) {\n    if (this == null || this.$__ == null) {\n      return v;\n    }\n    if (this.isNew) {\n      return v;\n    }\n    if (options && options.overwriteImmutable) {\n      return v;\n    }\n\n    const _immutable = typeof immutable === 'function' ?\n      immutable.call(this, this) :\n      immutable;\n    if (!_immutable) {\n      return v;\n    }\n\n    const _value = this.$__.priorDoc != null ?\n      this.$__.priorDoc.$__getValue(path) :\n      this.$__getValue(path);\n    if (this.$__.strictMode === 'throw' && v !== _value) {\n      throw new StrictModeError(path, 'Path `' + path + '` is immutable ' +\n        'and strict mode is set to throw.', true);\n    }\n\n    return _value;\n  };\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,eAAe,GAAGC,OAAO,CAAC,oBAAD,CAA/B;AAEA;AACA;AACA;;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,UAAT,EAAqB;EACpC,IAAIA,UAAU,CAACC,UAAf,EAA2B;IACzBD,UAAU,CAACE,gBAAX,GAA8BC,qBAAqB,CAACH,UAAU,CAACI,IAAZ,EACjDJ,UAAU,CAACK,OAAX,CAAmBC,SAD8B,CAAnD;IAEAN,UAAU,CAACO,GAAX,CAAeP,UAAU,CAACE,gBAA1B;EACD,CAJD,MAIO,IAAIF,UAAU,CAACE,gBAAf,EAAiC;IACtCF,UAAU,CAACQ,OAAX,GAAqBR,UAAU,CAACQ,OAAX,CACnBC,MADmB,CACZC,EAAE,IAAIA,EAAE,KAAKV,UAAU,CAACE,gBADZ,CAArB;IAEA,OAAOF,UAAU,CAACE,gBAAlB;EACD;AACF,CAVD;;AAYA,SAASC,qBAAT,CAA+BC,IAA/B,EAAqCE,SAArC,EAAgD;EAC9C,OAAO,SAASK,eAAT,CAAyBC,CAAzB,EAA4BC,SAA5B,EAAuCC,IAAvC,EAA6CT,OAA7C,EAAsD;IAC3D,IAAI,QAAQ,IAAR,IAAgB,KAAKU,GAAL,IAAY,IAAhC,EAAsC;MACpC,OAAOH,CAAP;IACD;;IACD,IAAI,KAAKI,KAAT,EAAgB;MACd,OAAOJ,CAAP;IACD;;IACD,IAAIP,OAAO,IAAIA,OAAO,CAACY,kBAAvB,EAA2C;MACzC,OAAOL,CAAP;IACD;;IAED,MAAMM,UAAU,GAAG,OAAOZ,SAAP,KAAqB,UAArB,GACjBA,SAAS,CAACa,IAAV,CAAe,IAAf,EAAqB,IAArB,CADiB,GAEjBb,SAFF;;IAGA,IAAI,CAACY,UAAL,EAAiB;MACf,OAAON,CAAP;IACD;;IAED,MAAMQ,MAAM,GAAG,KAAKL,GAAL,CAASM,QAAT,IAAqB,IAArB,GACb,KAAKN,GAAL,CAASM,QAAT,CAAkBC,WAAlB,CAA8BlB,IAA9B,CADa,GAEb,KAAKkB,WAAL,CAAiBlB,IAAjB,CAFF;;IAGA,IAAI,KAAKW,GAAL,CAASQ,UAAT,KAAwB,OAAxB,IAAmCX,CAAC,KAAKQ,MAA7C,EAAqD;MACnD,MAAM,IAAIxB,eAAJ,CAAoBQ,IAApB,EAA0B,WAAWA,IAAX,GAAkB,iBAAlB,GAC9B,kCADI,EACgC,IADhC,CAAN;IAED;;IAED,OAAOgB,MAAP;EACD,CA3BD;AA4BD"},"metadata":{},"sourceType":"script"}