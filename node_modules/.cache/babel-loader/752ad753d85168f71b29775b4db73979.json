{"ast":null,"code":"'use strict';\n\nconst isExclusive = require('../projection/isExclusive');\n\nconst isInclusive = require('../projection/isInclusive');\n/*!\n * ignore\n */\n\n\nmodule.exports = function selectPopulatedFields(fields, userProvidedFields, populateOptions) {\n  if (populateOptions == null) {\n    return;\n  }\n\n  const paths = Object.keys(populateOptions);\n  userProvidedFields = userProvidedFields || {};\n\n  if (isInclusive(fields)) {\n    for (const path of paths) {\n      if (!isPathInFields(userProvidedFields, path)) {\n        fields[path] = 1;\n      } else if (userProvidedFields[path] === 0) {\n        delete fields[path];\n      }\n    }\n  } else if (isExclusive(fields)) {\n    for (const path of paths) {\n      if (userProvidedFields[path] == null) {\n        delete fields[path];\n      }\n    }\n  }\n};\n/*!\n * ignore\n */\n\n\nfunction isPathInFields(userProvidedFields, path) {\n  const pieces = path.split('.');\n  const len = pieces.length;\n  let cur = pieces[0];\n\n  for (let i = 1; i < len; ++i) {\n    if (userProvidedFields[cur] != null || userProvidedFields[cur + '.$'] != null) {\n      return true;\n    }\n\n    cur += '.' + pieces[i];\n  }\n\n  return userProvidedFields[cur] != null || userProvidedFields[cur + '.$'] != null;\n}","map":{"version":3,"names":["isExclusive","require","isInclusive","module","exports","selectPopulatedFields","fields","userProvidedFields","populateOptions","paths","Object","keys","path","isPathInFields","pieces","split","len","length","cur","i"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/query/selectPopulatedFields.js"],"sourcesContent":["'use strict';\n\nconst isExclusive = require('../projection/isExclusive');\nconst isInclusive = require('../projection/isInclusive');\n\n/*!\n * ignore\n */\n\nmodule.exports = function selectPopulatedFields(fields, userProvidedFields, populateOptions) {\n  if (populateOptions == null) {\n    return;\n  }\n\n  const paths = Object.keys(populateOptions);\n  userProvidedFields = userProvidedFields || {};\n  if (isInclusive(fields)) {\n    for (const path of paths) {\n      if (!isPathInFields(userProvidedFields, path)) {\n        fields[path] = 1;\n      } else if (userProvidedFields[path] === 0) {\n        delete fields[path];\n      }\n    }\n  } else if (isExclusive(fields)) {\n    for (const path of paths) {\n      if (userProvidedFields[path] == null) {\n        delete fields[path];\n      }\n    }\n  }\n};\n\n/*!\n * ignore\n */\n\nfunction isPathInFields(userProvidedFields, path) {\n  const pieces = path.split('.');\n  const len = pieces.length;\n  let cur = pieces[0];\n  for (let i = 1; i < len; ++i) {\n    if (userProvidedFields[cur] != null || userProvidedFields[cur + '.$'] != null) {\n      return true;\n    }\n    cur += '.' + pieces[i];\n  }\n  return userProvidedFields[cur] != null || userProvidedFields[cur + '.$'] != null;\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,2BAAD,CAA3B;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,2BAAD,CAA3B;AAEA;AACA;AACA;;;AAEAE,MAAM,CAACC,OAAP,GAAiB,SAASC,qBAAT,CAA+BC,MAA/B,EAAuCC,kBAAvC,EAA2DC,eAA3D,EAA4E;EAC3F,IAAIA,eAAe,IAAI,IAAvB,EAA6B;IAC3B;EACD;;EAED,MAAMC,KAAK,GAAGC,MAAM,CAACC,IAAP,CAAYH,eAAZ,CAAd;EACAD,kBAAkB,GAAGA,kBAAkB,IAAI,EAA3C;;EACA,IAAIL,WAAW,CAACI,MAAD,CAAf,EAAyB;IACvB,KAAK,MAAMM,IAAX,IAAmBH,KAAnB,EAA0B;MACxB,IAAI,CAACI,cAAc,CAACN,kBAAD,EAAqBK,IAArB,CAAnB,EAA+C;QAC7CN,MAAM,CAACM,IAAD,CAAN,GAAe,CAAf;MACD,CAFD,MAEO,IAAIL,kBAAkB,CAACK,IAAD,CAAlB,KAA6B,CAAjC,EAAoC;QACzC,OAAON,MAAM,CAACM,IAAD,CAAb;MACD;IACF;EACF,CARD,MAQO,IAAIZ,WAAW,CAACM,MAAD,CAAf,EAAyB;IAC9B,KAAK,MAAMM,IAAX,IAAmBH,KAAnB,EAA0B;MACxB,IAAIF,kBAAkB,CAACK,IAAD,CAAlB,IAA4B,IAAhC,EAAsC;QACpC,OAAON,MAAM,CAACM,IAAD,CAAb;MACD;IACF;EACF;AACF,CAtBD;AAwBA;AACA;AACA;;;AAEA,SAASC,cAAT,CAAwBN,kBAAxB,EAA4CK,IAA5C,EAAkD;EAChD,MAAME,MAAM,GAAGF,IAAI,CAACG,KAAL,CAAW,GAAX,CAAf;EACA,MAAMC,GAAG,GAAGF,MAAM,CAACG,MAAnB;EACA,IAAIC,GAAG,GAAGJ,MAAM,CAAC,CAAD,CAAhB;;EACA,KAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAApB,EAAyB,EAAEG,CAA3B,EAA8B;IAC5B,IAAIZ,kBAAkB,CAACW,GAAD,CAAlB,IAA2B,IAA3B,IAAmCX,kBAAkB,CAACW,GAAG,GAAG,IAAP,CAAlB,IAAkC,IAAzE,EAA+E;MAC7E,OAAO,IAAP;IACD;;IACDA,GAAG,IAAI,MAAMJ,MAAM,CAACK,CAAD,CAAnB;EACD;;EACD,OAAOZ,kBAAkB,CAACW,GAAD,CAAlB,IAA2B,IAA3B,IAAmCX,kBAAkB,CAACW,GAAG,GAAG,IAAP,CAAlB,IAAkC,IAA5E;AACD"},"metadata":{},"sourceType":"script"}