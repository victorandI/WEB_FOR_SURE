{"ast":null,"code":"'use strict';\n\nmodule.exports = function stringifyFunctionOperators(pipeline) {\n  if (!Array.isArray(pipeline)) {\n    return;\n  }\n\n  for (const stage of pipeline) {\n    if (stage == null) {\n      continue;\n    }\n\n    const canHaveAccumulator = stage.$group || stage.$bucket || stage.$bucketAuto;\n\n    if (canHaveAccumulator != null) {\n      for (const key of Object.keys(canHaveAccumulator)) {\n        handleAccumulator(canHaveAccumulator[key]);\n      }\n    }\n\n    const stageType = Object.keys(stage)[0];\n\n    if (stageType && typeof stage[stageType] === 'object') {\n      const stageOptions = stage[stageType];\n\n      for (const key of Object.keys(stageOptions)) {\n        if (stageOptions[key] != null && stageOptions[key].$function != null && typeof stageOptions[key].$function.body === 'function') {\n          stageOptions[key].$function.body = stageOptions[key].$function.body.toString();\n        }\n      }\n    }\n\n    if (stage.$facet != null) {\n      for (const key of Object.keys(stage.$facet)) {\n        stringifyFunctionOperators(stage.$facet[key]);\n      }\n    }\n  }\n};\n\nfunction handleAccumulator(operator) {\n  if (operator == null || operator.$accumulator == null) {\n    return;\n  }\n\n  for (const key of ['init', 'accumulate', 'merge', 'finalize']) {\n    if (typeof operator.$accumulator[key] === 'function') {\n      operator.$accumulator[key] = String(operator.$accumulator[key]);\n    }\n  }\n}","map":{"version":3,"names":["module","exports","stringifyFunctionOperators","pipeline","Array","isArray","stage","canHaveAccumulator","$group","$bucket","$bucketAuto","key","Object","keys","handleAccumulator","stageType","stageOptions","$function","body","toString","$facet","operator","$accumulator","String"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/aggregate/stringifyFunctionOperators.js"],"sourcesContent":["'use strict';\n\nmodule.exports = function stringifyFunctionOperators(pipeline) {\n  if (!Array.isArray(pipeline)) {\n    return;\n  }\n\n  for (const stage of pipeline) {\n    if (stage == null) {\n      continue;\n    }\n\n    const canHaveAccumulator = stage.$group || stage.$bucket || stage.$bucketAuto;\n    if (canHaveAccumulator != null) {\n      for (const key of Object.keys(canHaveAccumulator)) {\n        handleAccumulator(canHaveAccumulator[key]);\n      }\n    }\n\n    const stageType = Object.keys(stage)[0];\n    if (stageType && typeof stage[stageType] === 'object') {\n      const stageOptions = stage[stageType];\n      for (const key of Object.keys(stageOptions)) {\n        if (stageOptions[key] != null &&\n            stageOptions[key].$function != null &&\n            typeof stageOptions[key].$function.body === 'function') {\n          stageOptions[key].$function.body = stageOptions[key].$function.body.toString();\n        }\n      }\n    }\n\n    if (stage.$facet != null) {\n      for (const key of Object.keys(stage.$facet)) {\n        stringifyFunctionOperators(stage.$facet[key]);\n      }\n    }\n  }\n};\n\nfunction handleAccumulator(operator) {\n  if (operator == null || operator.$accumulator == null) {\n    return;\n  }\n\n  for (const key of ['init', 'accumulate', 'merge', 'finalize']) {\n    if (typeof operator.$accumulator[key] === 'function') {\n      operator.$accumulator[key] = String(operator.$accumulator[key]);\n    }\n  }\n}"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,0BAAT,CAAoCC,QAApC,EAA8C;EAC7D,IAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,QAAd,CAAL,EAA8B;IAC5B;EACD;;EAED,KAAK,MAAMG,KAAX,IAAoBH,QAApB,EAA8B;IAC5B,IAAIG,KAAK,IAAI,IAAb,EAAmB;MACjB;IACD;;IAED,MAAMC,kBAAkB,GAAGD,KAAK,CAACE,MAAN,IAAgBF,KAAK,CAACG,OAAtB,IAAiCH,KAAK,CAACI,WAAlE;;IACA,IAAIH,kBAAkB,IAAI,IAA1B,EAAgC;MAC9B,KAAK,MAAMI,GAAX,IAAkBC,MAAM,CAACC,IAAP,CAAYN,kBAAZ,CAAlB,EAAmD;QACjDO,iBAAiB,CAACP,kBAAkB,CAACI,GAAD,CAAnB,CAAjB;MACD;IACF;;IAED,MAAMI,SAAS,GAAGH,MAAM,CAACC,IAAP,CAAYP,KAAZ,EAAmB,CAAnB,CAAlB;;IACA,IAAIS,SAAS,IAAI,OAAOT,KAAK,CAACS,SAAD,CAAZ,KAA4B,QAA7C,EAAuD;MACrD,MAAMC,YAAY,GAAGV,KAAK,CAACS,SAAD,CAA1B;;MACA,KAAK,MAAMJ,GAAX,IAAkBC,MAAM,CAACC,IAAP,CAAYG,YAAZ,CAAlB,EAA6C;QAC3C,IAAIA,YAAY,CAACL,GAAD,CAAZ,IAAqB,IAArB,IACAK,YAAY,CAACL,GAAD,CAAZ,CAAkBM,SAAlB,IAA+B,IAD/B,IAEA,OAAOD,YAAY,CAACL,GAAD,CAAZ,CAAkBM,SAAlB,CAA4BC,IAAnC,KAA4C,UAFhD,EAE4D;UAC1DF,YAAY,CAACL,GAAD,CAAZ,CAAkBM,SAAlB,CAA4BC,IAA5B,GAAmCF,YAAY,CAACL,GAAD,CAAZ,CAAkBM,SAAlB,CAA4BC,IAA5B,CAAiCC,QAAjC,EAAnC;QACD;MACF;IACF;;IAED,IAAIb,KAAK,CAACc,MAAN,IAAgB,IAApB,EAA0B;MACxB,KAAK,MAAMT,GAAX,IAAkBC,MAAM,CAACC,IAAP,CAAYP,KAAK,CAACc,MAAlB,CAAlB,EAA6C;QAC3ClB,0BAA0B,CAACI,KAAK,CAACc,MAAN,CAAaT,GAAb,CAAD,CAA1B;MACD;IACF;EACF;AACF,CAnCD;;AAqCA,SAASG,iBAAT,CAA2BO,QAA3B,EAAqC;EACnC,IAAIA,QAAQ,IAAI,IAAZ,IAAoBA,QAAQ,CAACC,YAAT,IAAyB,IAAjD,EAAuD;IACrD;EACD;;EAED,KAAK,MAAMX,GAAX,IAAkB,CAAC,MAAD,EAAS,YAAT,EAAuB,OAAvB,EAAgC,UAAhC,CAAlB,EAA+D;IAC7D,IAAI,OAAOU,QAAQ,CAACC,YAAT,CAAsBX,GAAtB,CAAP,KAAsC,UAA1C,EAAsD;MACpDU,QAAQ,CAACC,YAAT,CAAsBX,GAAtB,IAA6BY,MAAM,CAACF,QAAQ,CAACC,YAAT,CAAsBX,GAAtB,CAAD,CAAnC;IACD;EACF;AACF"},"metadata":{},"sourceType":"script"}