{"ast":null,"code":"'use strict';\n\nmodule.exports = function decorateDiscriminatorIndexOptions(schema, indexOptions) {\n  // If the model is a discriminator and has an index, add a\n  // partialFilterExpression by default so the index will only apply\n  // to that discriminator.\n  const discriminatorName = schema.discriminatorMapping && schema.discriminatorMapping.value;\n\n  if (discriminatorName && !('sparse' in indexOptions)) {\n    const discriminatorKey = schema.options.discriminatorKey;\n    indexOptions.partialFilterExpression = indexOptions.partialFilterExpression || {};\n    indexOptions.partialFilterExpression[discriminatorKey] = discriminatorName;\n  }\n\n  return indexOptions;\n};","map":{"version":3,"names":["module","exports","decorateDiscriminatorIndexOptions","schema","indexOptions","discriminatorName","discriminatorMapping","value","discriminatorKey","options","partialFilterExpression"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/helpers/indexes/decorateDiscriminatorIndexOptions.js"],"sourcesContent":["'use strict';\n\nmodule.exports = function decorateDiscriminatorIndexOptions(schema, indexOptions) {\n  // If the model is a discriminator and has an index, add a\n  // partialFilterExpression by default so the index will only apply\n  // to that discriminator.\n  const discriminatorName = schema.discriminatorMapping && schema.discriminatorMapping.value;\n  if (discriminatorName && !('sparse' in indexOptions)) {\n    const discriminatorKey = schema.options.discriminatorKey;\n    indexOptions.partialFilterExpression = indexOptions.partialFilterExpression || {};\n    indexOptions.partialFilterExpression[discriminatorKey] = discriminatorName;\n  }\n  return indexOptions;\n};"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,iCAAT,CAA2CC,MAA3C,EAAmDC,YAAnD,EAAiE;EAChF;EACA;EACA;EACA,MAAMC,iBAAiB,GAAGF,MAAM,CAACG,oBAAP,IAA+BH,MAAM,CAACG,oBAAP,CAA4BC,KAArF;;EACA,IAAIF,iBAAiB,IAAI,EAAE,YAAYD,YAAd,CAAzB,EAAsD;IACpD,MAAMI,gBAAgB,GAAGL,MAAM,CAACM,OAAP,CAAeD,gBAAxC;IACAJ,YAAY,CAACM,uBAAb,GAAuCN,YAAY,CAACM,uBAAb,IAAwC,EAA/E;IACAN,YAAY,CAACM,uBAAb,CAAqCF,gBAArC,IAAyDH,iBAAzD;EACD;;EACD,OAAOD,YAAP;AACD,CAXD"},"metadata":{},"sourceType":"script"}