{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\Downloads\\\\web_car_react-main (2)\\\\web_car_react-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'./car_info.css';import'./bootstrap.min.css';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CarInfo=function CarInfo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),CarInfo=_useState2[0],setAllProductsList=_useState2[1];var getCar=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(url,{method:'GET'}).then(function(res){if(res.ok){return res.json();}else{alert(\"something is wrong\");}}).then(function(data){setAllProductsList(data);}).catch(function(err){console.error(err);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function getCar(_x){return _ref.apply(this,arguments);};}();var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isAdmin=_useState4[0],setUserType=_useState4[1];useEffect(function(){getCar('http://127.0.0.1:5000/car/'+localStorage.getItem('car_id'));console.log(localStorage.getItem('user_status')==\"Admin\");if(localStorage.getItem('user_status')==\"Admin\"){setUserType(true);}else{setUserType(false);}},[]);var makeReservation=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var authToken,start_time,stop_time,data,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:authToken=localStorage.getItem('token');if(!(authToken===\"null\")){_context2.next=4;break;}alert(\"please log in to the site\");return _context2.abrupt(\"return\");case 4:start_time=localStorage.getItem('time_start');stop_time=localStorage.getItem('time_stop');console.log(start_time,stop_time);if(!(start_time===\"undefined\"||stop_time===\"undefined\")){_context2.next=10;break;}alert(\"you did not choose the time\");return _context2.abrupt(\"return\");case 10:data={\"startDate\":start_time,\"endDate\":stop_time,\"sum\":CarInfo.price*(diffDays+1),\"idUser\":parseInt(localStorage.getItem('idUser')),\"idCar\":CarInfo.idCar};_context2.next=13;return fetch(\"http://127.0.0.1:5000/service\",{method:'POST',headers:{'Content-type':'application/json','Accept':'application/json','Authorization':'Bearer '+authToken},body:JSON.stringify(data)});case 13:res=_context2.sent;if(res.ok){alert(\"Reservation successful\");window.location.reload();}else{alert(\"something is wrong\");};case 16:case\"end\":return _context2.stop();}}},_callee2);}));return function makeReservation(){return _ref2.apply(this,arguments);};}();var date1=new Date(localStorage.getItem('time_start'));var date2=new Date(localStorage.getItem('time_stop'));var diffTime=Math.abs(date2-date1);var diffDays=Math.ceil(diffTime/(1000*60*60*24));var days;if(isNaN(diffDays)){days=0;}else{days=diffDays;}var deleteCar=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var authToken,url,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:authToken=localStorage.getItem('token');url=\"http://127.0.0.1:5000/car/\"+localStorage.getItem('car_id');_context3.next=4;return fetch(url,{method:'DELETE',headers:{'Authorization':'Bearer '+authToken}});case 4:res=_context3.sent;if(res.ok){alert(\"delete successful\");localStorage.setItem('car_id',\"null\");window.location.reload();}else{alert(\"something is wrong\");};case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteCar(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"car_list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"car_list_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"car_list_col1\",children:/*#__PURE__*/_jsx(\"img\",{src:CarInfo.imgUrl,width:\"600\",height:\"330\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"car_list_col2\",children:[/*#__PURE__*/_jsx(\"h3\",{children:CarInfo.name}),/*#__PURE__*/_jsx(\"p\",{children:\"This project was designed for one of the biggest Swiss entertainment centers that grew in popularity in 2009. Everything was completed in less than a month.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"divade_line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"car_info\",children:[/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[\" Rent for \",days+1,\" days\"]})}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[\" Total price \",CarInfo.price*(days+1),\"$\"]})})]}),/*#__PURE__*/_jsx(\"a\",{className:\"rent\",onClick:makeReservation,children:\"RENT NOW\"})]}),/*#__PURE__*/_jsx(\"a\",{className:\"delete_car_\".concat(isAdmin?\"opacity\":\"unopacity\"),onClick:deleteCar,children:\"Delete Car\"})]})}),/*#__PURE__*/_jsxs(\"div\",{class:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-md-12\",children:/*#__PURE__*/_jsx(\"h4\",{class:\"border-bottom pb-2\",children:\"Comments\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"\",children:\"Write a comment\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"textarea\",rows:\"3\",class:\"form-control\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-md-12\",children:/*#__PURE__*/_jsx(\"button\",{id:\"submitBtn\",class:\"btn btn-primary float-right\",children:\"Post comment\"})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"typing text-success\"}),/*#__PURE__*/_jsx(\"ul\",{class:\"comment__box\"})]})})]})]});};export default CarInfo;","map":{"version":3,"names":["useEffect","useState","CarInfo","setAllProductsList","getCar","url","fetch","method","then","res","ok","json","alert","data","catch","err","console","error","isAdmin","setUserType","localStorage","getItem","log","makeReservation","authToken","start_time","stop_time","price","diffDays","parseInt","idCar","headers","body","JSON","stringify","window","location","reload","date1","Date","date2","diffTime","Math","abs","ceil","days","isNaN","deleteCar","setItem","imgUrl","name"],"sources":["C:/Users/User/Downloads/web_car_react-main (2)/web_car_react-main/src/component/car_info/car_info.js"],"sourcesContent":["import './car_info.css';\nimport './bootstrap.min.css';\nimport {useEffect, useState} from 'react';\n\nconst CarInfo = () => {\n\n    const [CarInfo, setAllProductsList] = useState([]);\n    const getCar = async (url) => {\n        fetch(url, {\n            method: 'GET',\n        })\n        .then(res=>{\n            if(res.ok){\n                return res.json()\n            }else{\n                alert(\"something is wrong\")\n            }\n        }).then(data =>{\n            setAllProductsList(data);\n            }\n        ).catch((err) => {\n            console.error(err)\n        }\n        );\n     }\n    const [isAdmin, setUserType] = useState(true);\n    useEffect(() => {\n        getCar('http://127.0.0.1:5000/car/' + localStorage.getItem('car_id'))\n        console.log(localStorage.getItem('user_status') == \"Admin\")\n        if (localStorage.getItem('user_status') == \"Admin\"){\n\n            setUserType(true);\n        }else{\n\n            setUserType(false);\n        }\n    },[])\n\n\n    const makeReservation = async () => {\n        const authToken = localStorage.getItem('token');\n        if (authToken === \"null\"){\n            alert(\"please log in to the site\");\n            return;\n        }\n        const start_time = localStorage.getItem('time_start')\n        const stop_time = localStorage.getItem('time_stop')\n        console.log(start_time, stop_time)\n        if (start_time === \"undefined\" || stop_time === \"undefined\"){\n            alert(\"you did not choose the time\");\n            return;\n        }\n\n        const data = {  \"startDate\": start_time, \"endDate\":stop_time,\"sum\":CarInfo.price * (diffDays+1), \"idUser\":parseInt(localStorage.getItem('idUser')), \"idCar\":CarInfo.idCar};\n\n        const res = await fetch(\"http://127.0.0.1:5000/service\", {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization': 'Bearer ' + authToken\n            },\n            body:JSON.stringify(data)});\n            if(res.ok){\n                alert(\"Reservation successful\");\n                window.location.reload();\n            }else{\n                \n                alert(\"something is wrong\")\n            };\n     }\n     const date1 = new Date(localStorage.getItem('time_start'))\n     const date2 = new Date(localStorage.getItem('time_stop'))\n     const diffTime = Math.abs(date2 - date1);\n     const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); \n     var days;\n     if (isNaN(diffDays)){\n        days = 0;\n     }else{\n        days = diffDays;\n     }\n\n     const deleteCar = async () => {\n        const authToken = localStorage.getItem('token');\n        const url =\"http://127.0.0.1:5000/car/\" +  localStorage.getItem('car_id');\n        const res = await fetch(url, \n        {\n            method: 'DELETE',\n            headers: {\n                'Authorization': 'Bearer ' + authToken\n            }\n        });\n        if(res.ok){\n            alert(\"delete successful\");\n            localStorage.setItem('car_id', \"null\");\n            window.location.reload();\n        }else{\n            \n            alert(\"something is wrong\")\n        }  ;\n     }\n\n    return(\n        <div>\n        <div className = \"car_list\">\n            <div className=\"car_list_row\">\n                <div className=\"car_list_col1\">\n                    <img src={CarInfo.imgUrl} width=\"600\" height=\"330\"/>\n                </div>\n                <div className=\"car_list_col2\">\n                    <h3>{CarInfo.name}</h3>\n                    <p>This project was designed for one of the biggest Swiss entertainment centers that \n                    grew in popularity in 2009. \n                    Everything was completed in less than a month.\n                    </p>\n                    <div className =\"divade_line\"></div>\n                    <div className =\"car_info\">\n                        <ul>\n                            <li> Rent for {days+1} days</li>\n                        </ul>\n                        <ul>\n                            <li> Total price {CarInfo.price * (days+1)}$</li>\n                        </ul>\n                    </div>\n                    <a className=\"rent\" onClick = {makeReservation}>RENT NOW</a>\n                    \n                </div>\n                <a className={`delete_car_${isAdmin  ? \"opacity\" : \"unopacity\"}` } onClick = {deleteCar}>Delete Car</a>\n            </div>\n        </div>  \n        <div class=\"container\">\n        <div class=\"row mb-4\">\n            <div class=\"col-md-12\">\n                <h4 class=\"border-bottom pb-2\">Comments</h4>\n            </div>\n            <div class=\"col-md-12\">\n                <div class=\"form-group\">\n                    <label for=\"\">Write a comment</label>\n                    <textarea id=\"textarea\" rows=\"3\" class=\"form-control\"></textarea>\n                </div>\n            </div>\n            <div class=\"col-md-12\">\n                <button id=\"submitBtn\" class=\"btn btn-primary float-right\">Post comment</button>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n                <div class=\"typing text-success\"></div>\n                <ul class=\"comment__box\">\n  \n                </ul>\n            </div>\n        </div>\n    </div>\n        </div>\n    )\n}\n\nexport default CarInfo;"],"mappings":"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"},"metadata":{},"sourceType":"module"}