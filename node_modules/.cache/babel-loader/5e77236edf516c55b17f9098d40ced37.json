{"ast":null,"code":"'use strict';\n/*!\n * ignore\n */\n\nmodule.exports = function (schema) {\n  const unshift = true;\n  schema.pre('save', false, function validateBeforeSave(next, options) {\n    const _this = this; // Nested docs have their own presave\n\n\n    if (this.$isSubdocument) {\n      return next();\n    }\n\n    const hasValidateBeforeSaveOption = options && typeof options === 'object' && 'validateBeforeSave' in options;\n    let shouldValidate;\n\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    } // Validate\n\n\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options && typeof options === 'object' && 'validateModifiedOnly' in options;\n      const validateOptions = hasValidateModifiedOnlyOption ? {\n        validateModifiedOnly: options.validateModifiedOnly\n      } : null;\n      this.$validate(validateOptions, function (error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          _this.$op = 'save';\n          next(error);\n        });\n      });\n    } else {\n      next();\n    }\n  }, null, unshift);\n};","map":{"version":3,"names":["module","exports","schema","unshift","pre","validateBeforeSave","next","options","_this","$isSubdocument","hasValidateBeforeSaveOption","shouldValidate","$__schema","hasValidateModifiedOnlyOption","validateOptions","validateModifiedOnly","$validate","error","s","hooks","execPost","$op"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/plugins/validateBeforeSave.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schema) {\n  const unshift = true;\n  schema.pre('save', false, function validateBeforeSave(next, options) {\n    const _this = this;\n    // Nested docs have their own presave\n    if (this.$isSubdocument) {\n      return next();\n    }\n\n    const hasValidateBeforeSaveOption = options &&\n        (typeof options === 'object') &&\n        ('validateBeforeSave' in options);\n\n    let shouldValidate;\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    }\n\n    // Validate\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options &&\n          (typeof options === 'object') &&\n          ('validateModifiedOnly' in options);\n      const validateOptions = hasValidateModifiedOnlyOption ?\n        { validateModifiedOnly: options.validateModifiedOnly } :\n        null;\n      this.$validate(validateOptions, function(error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], { error: error }, function(error) {\n          _this.$op = 'save';\n          next(error);\n        });\n      });\n    } else {\n      next();\n    }\n  }, null, unshift);\n};\n"],"mappings":"AAAA;AAEA;AACA;AACA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,UAASC,MAAT,EAAiB;EAChC,MAAMC,OAAO,GAAG,IAAhB;EACAD,MAAM,CAACE,GAAP,CAAW,MAAX,EAAmB,KAAnB,EAA0B,SAASC,kBAAT,CAA4BC,IAA5B,EAAkCC,OAAlC,EAA2C;IACnE,MAAMC,KAAK,GAAG,IAAd,CADmE,CAEnE;;;IACA,IAAI,KAAKC,cAAT,EAAyB;MACvB,OAAOH,IAAI,EAAX;IACD;;IAED,MAAMI,2BAA2B,GAAGH,OAAO,IACtC,OAAOA,OAAP,KAAmB,QADY,IAE/B,wBAAwBA,OAF7B;IAIA,IAAII,cAAJ;;IACA,IAAID,2BAAJ,EAAiC;MAC/BC,cAAc,GAAG,CAAC,CAACJ,OAAO,CAACF,kBAA3B;IACD,CAFD,MAEO;MACLM,cAAc,GAAG,KAAKC,SAAL,CAAeL,OAAf,CAAuBF,kBAAxC;IACD,CAhBkE,CAkBnE;;;IACA,IAAIM,cAAJ,EAAoB;MAClB,MAAME,6BAA6B,GAAGN,OAAO,IACxC,OAAOA,OAAP,KAAmB,QADc,IAEjC,0BAA0BA,OAF/B;MAGA,MAAMO,eAAe,GAAGD,6BAA6B,GACnD;QAAEE,oBAAoB,EAAER,OAAO,CAACQ;MAAhC,CADmD,GAEnD,IAFF;MAGA,KAAKC,SAAL,CAAeF,eAAf,EAAgC,UAASG,KAAT,EAAgB;QAC9C,OAAOT,KAAK,CAACI,SAAN,CAAgBM,CAAhB,CAAkBC,KAAlB,CAAwBC,QAAxB,CAAiC,YAAjC,EAA+CZ,KAA/C,EAAsD,CAACA,KAAD,CAAtD,EAA+D;UAAES,KAAK,EAAEA;QAAT,CAA/D,EAAiF,UAASA,KAAT,EAAgB;UACtGT,KAAK,CAACa,GAAN,GAAY,MAAZ;UACAf,IAAI,CAACW,KAAD,CAAJ;QACD,CAHM,CAAP;MAID,CALD;IAMD,CAbD,MAaO;MACLX,IAAI;IACL;EACF,CAnCD,EAmCG,IAnCH,EAmCSH,OAnCT;AAoCD,CAtCD"},"metadata":{},"sourceType":"script"}