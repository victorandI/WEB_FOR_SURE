{"ast":null,"code":"/*!\n * Module dependencies.\n */\n'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\n\nconst Subdocument = require('./subdocument');\n\nconst utils = require('../utils');\n\nconst documentArrayParent = require('../helpers/symbols').documentArrayParent;\n/*!\n * A constructor.\n *\n * @param {Object} obj js object returned from the db\n * @param {MongooseDocumentArray} parentArr the parent array of this document\n * @param {Boolean} skipId\n * @inherits Document\n * @api private\n */\n\n\nfunction ArraySubdocument(obj, parentArr, skipId, fields, index) {\n  if (utils.isMongooseDocumentArray(parentArr)) {\n    this.__parentArray = parentArr;\n    this[documentArrayParent] = parentArr.$parent();\n  } else {\n    this.__parentArray = undefined;\n    this[documentArrayParent] = undefined;\n  }\n\n  this.$setIndex(index);\n  this.$__parent = this[documentArrayParent];\n  Subdocument.call(this, obj, fields, this[documentArrayParent], skipId, {\n    isNew: true\n  });\n}\n/*!\n * Inherit from Subdocument\n */\n\n\nArraySubdocument.prototype = Object.create(Subdocument.prototype);\nArraySubdocument.prototype.constructor = ArraySubdocument;\nObject.defineProperty(ArraySubdocument.prototype, '$isSingleNested', {\n  configurable: false,\n  writable: false,\n  value: false\n});\nObject.defineProperty(ArraySubdocument.prototype, '$isDocumentArrayElement', {\n  configurable: false,\n  writable: false,\n  value: true\n});\n\nfor (const i in EventEmitter.prototype) {\n  ArraySubdocument[i] = EventEmitter.prototype[i];\n}\n/*!\n * ignore\n */\n\n\nArraySubdocument.prototype.$setIndex = function (index) {\n  this.__index = index;\n\n  if (this.$__ != null && this.$__.validationError != null) {\n    const keys = Object.keys(this.$__.validationError.errors);\n\n    for (const key of keys) {\n      this.invalidate(key, this.$__.validationError.errors[key]);\n    }\n  }\n};\n/*!\n * ignore\n */\n\n\nArraySubdocument.prototype.populate = function () {\n  throw new Error('Mongoose does not support calling populate() on nested ' + 'docs. Instead of `doc.arr[0].populate(\"path\")`, use ' + '`doc.populate(\"arr.0.path\")`');\n};\n/*!\n * ignore\n */\n\n\nArraySubdocument.prototype.$__removeFromParent = function () {\n  const _id = this._doc._id;\n\n  if (!_id) {\n    throw new Error('For your own good, Mongoose does not know ' + 'how to remove an ArraySubdocument that has no _id');\n  }\n\n  this.__parentArray.pull({\n    _id: _id\n  });\n};\n/**\n * Returns the full path to this document. If optional `path` is passed, it is appended to the full path.\n *\n * @param {String} [path]\n * @param {Boolean} [skipIndex] Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.\n * @return {String}\n * @api private\n * @method $__fullPath\n * @memberOf ArraySubdocument\n * @instance\n */\n\n\nArraySubdocument.prototype.$__fullPath = function (path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n\n  if (!this.$__.fullPath) {\n    this.ownerDocument();\n  }\n\n  if (skipIndex) {\n    return path ? this.$__.fullPath + '.' + path : this.$__.fullPath;\n  }\n\n  return path ? this.$__.fullPath + '.' + this.__index + '.' + path : this.$__.fullPath + '.' + this.__index;\n};\n/*!\n * Given a path relative to this document, return the path relative\n * to the top-level document.\n */\n\n\nArraySubdocument.prototype.$__pathRelativeToParent = function (path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n\n  if (skipIndex) {\n    return path == null ? this.__parentArray.$path() : this.__parentArray.$path() + '.' + path;\n  }\n\n  if (path == null) {\n    return this.__parentArray.$path() + '.' + this.__index;\n  }\n\n  return this.__parentArray.$path() + '.' + this.__index + '.' + path;\n};\n/*!\n * Returns this sub-documents parent document.\n */\n\n\nArraySubdocument.prototype.$parent = function () {\n  return this[documentArrayParent];\n};\n/**\n * Returns this subdocument's parent array.\n *\n * #### Example:\n *\n *     const Test = mongoose.model('Test', new Schema({\n *       docArr: [{ name: String }]\n *     }));\n *     const doc = new Test({ docArr: [{ name: 'test subdoc' }] });\n *\n *     doc.docArr[0].parentArray() === doc.docArr; // true\n *\n * @api public\n * @method parentArray\n * @returns DocumentArray\n */\n\n\nArraySubdocument.prototype.parentArray = function () {\n  return this.__parentArray;\n};\n/*!\n * Module exports.\n */\n\n\nmodule.exports = ArraySubdocument;","map":{"version":3,"names":["EventEmitter","require","Subdocument","utils","documentArrayParent","ArraySubdocument","obj","parentArr","skipId","fields","index","isMongooseDocumentArray","__parentArray","$parent","undefined","$setIndex","$__parent","call","isNew","prototype","Object","create","constructor","defineProperty","configurable","writable","value","i","__index","$__","validationError","keys","errors","key","invalidate","populate","Error","$__removeFromParent","_id","_doc","pull","$__fullPath","path","skipIndex","fullPath","ownerDocument","$__pathRelativeToParent","$path","parentArray","module","exports"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/types/ArraySubdocument.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst EventEmitter = require('events').EventEmitter;\nconst Subdocument = require('./subdocument');\nconst utils = require('../utils');\n\nconst documentArrayParent = require('../helpers/symbols').documentArrayParent;\n\n/*!\n * A constructor.\n *\n * @param {Object} obj js object returned from the db\n * @param {MongooseDocumentArray} parentArr the parent array of this document\n * @param {Boolean} skipId\n * @inherits Document\n * @api private\n */\n\nfunction ArraySubdocument(obj, parentArr, skipId, fields, index) {\n  if (utils.isMongooseDocumentArray(parentArr)) {\n    this.__parentArray = parentArr;\n    this[documentArrayParent] = parentArr.$parent();\n  } else {\n    this.__parentArray = undefined;\n    this[documentArrayParent] = undefined;\n  }\n  this.$setIndex(index);\n  this.$__parent = this[documentArrayParent];\n\n  Subdocument.call(this, obj, fields, this[documentArrayParent], skipId, { isNew: true });\n}\n\n/*!\n * Inherit from Subdocument\n */\nArraySubdocument.prototype = Object.create(Subdocument.prototype);\nArraySubdocument.prototype.constructor = ArraySubdocument;\n\nObject.defineProperty(ArraySubdocument.prototype, '$isSingleNested', {\n  configurable: false,\n  writable: false,\n  value: false\n});\n\nObject.defineProperty(ArraySubdocument.prototype, '$isDocumentArrayElement', {\n  configurable: false,\n  writable: false,\n  value: true\n});\n\nfor (const i in EventEmitter.prototype) {\n  ArraySubdocument[i] = EventEmitter.prototype[i];\n}\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$setIndex = function(index) {\n  this.__index = index;\n\n  if (this.$__ != null && this.$__.validationError != null) {\n    const keys = Object.keys(this.$__.validationError.errors);\n    for (const key of keys) {\n      this.invalidate(key, this.$__.validationError.errors[key]);\n    }\n  }\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.populate = function() {\n  throw new Error('Mongoose does not support calling populate() on nested ' +\n    'docs. Instead of `doc.arr[0].populate(\"path\")`, use ' +\n    '`doc.populate(\"arr.0.path\")`');\n};\n\n/*!\n * ignore\n */\n\nArraySubdocument.prototype.$__removeFromParent = function() {\n  const _id = this._doc._id;\n  if (!_id) {\n    throw new Error('For your own good, Mongoose does not know ' +\n      'how to remove an ArraySubdocument that has no _id');\n  }\n  this.__parentArray.pull({ _id: _id });\n};\n\n/**\n * Returns the full path to this document. If optional `path` is passed, it is appended to the full path.\n *\n * @param {String} [path]\n * @param {Boolean} [skipIndex] Skip adding the array index. For example `arr.foo` instead of `arr.0.foo`.\n * @return {String}\n * @api private\n * @method $__fullPath\n * @memberOf ArraySubdocument\n * @instance\n */\n\nArraySubdocument.prototype.$__fullPath = function(path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (!this.$__.fullPath) {\n    this.ownerDocument();\n  }\n\n  if (skipIndex) {\n    return path ?\n      this.$__.fullPath + '.' + path :\n      this.$__.fullPath;\n  }\n\n  return path ?\n    this.$__.fullPath + '.' + this.__index + '.' + path :\n    this.$__.fullPath + '.' + this.__index;\n};\n\n/*!\n * Given a path relative to this document, return the path relative\n * to the top-level document.\n */\n\nArraySubdocument.prototype.$__pathRelativeToParent = function(path, skipIndex) {\n  if (this.__index == null) {\n    return null;\n  }\n  if (skipIndex) {\n    return path == null ? this.__parentArray.$path() : this.__parentArray.$path() + '.' + path;\n  }\n  if (path == null) {\n    return this.__parentArray.$path() + '.' + this.__index;\n  }\n  return this.__parentArray.$path() + '.' + this.__index + '.' + path;\n};\n\n/*!\n * Returns this sub-documents parent document.\n */\n\nArraySubdocument.prototype.$parent = function() {\n  return this[documentArrayParent];\n};\n\n/**\n * Returns this subdocument's parent array.\n *\n * #### Example:\n *\n *     const Test = mongoose.model('Test', new Schema({\n *       docArr: [{ name: String }]\n *     }));\n *     const doc = new Test({ docArr: [{ name: 'test subdoc' }] });\n *\n *     doc.docArr[0].parentArray() === doc.docArr; // true\n *\n * @api public\n * @method parentArray\n * @returns DocumentArray\n */\n\nArraySubdocument.prototype.parentArray = function() {\n  return this.__parentArray;\n};\n\n/*!\n * Module exports.\n */\n\nmodule.exports = ArraySubdocument;\n"],"mappings":"AAAA;AACA;AACA;AAEA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,YAAvC;;AACA,MAAME,WAAW,GAAGD,OAAO,CAAC,eAAD,CAA3B;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,UAAD,CAArB;;AAEA,MAAMG,mBAAmB,GAAGH,OAAO,CAAC,oBAAD,CAAP,CAA8BG,mBAA1D;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+BC,SAA/B,EAA0CC,MAA1C,EAAkDC,MAAlD,EAA0DC,KAA1D,EAAiE;EAC/D,IAAIP,KAAK,CAACQ,uBAAN,CAA8BJ,SAA9B,CAAJ,EAA8C;IAC5C,KAAKK,aAAL,GAAqBL,SAArB;IACA,KAAKH,mBAAL,IAA4BG,SAAS,CAACM,OAAV,EAA5B;EACD,CAHD,MAGO;IACL,KAAKD,aAAL,GAAqBE,SAArB;IACA,KAAKV,mBAAL,IAA4BU,SAA5B;EACD;;EACD,KAAKC,SAAL,CAAeL,KAAf;EACA,KAAKM,SAAL,GAAiB,KAAKZ,mBAAL,CAAjB;EAEAF,WAAW,CAACe,IAAZ,CAAiB,IAAjB,EAAuBX,GAAvB,EAA4BG,MAA5B,EAAoC,KAAKL,mBAAL,CAApC,EAA+DI,MAA/D,EAAuE;IAAEU,KAAK,EAAE;EAAT,CAAvE;AACD;AAED;AACA;AACA;;;AACAb,gBAAgB,CAACc,SAAjB,GAA6BC,MAAM,CAACC,MAAP,CAAcnB,WAAW,CAACiB,SAA1B,CAA7B;AACAd,gBAAgB,CAACc,SAAjB,CAA2BG,WAA3B,GAAyCjB,gBAAzC;AAEAe,MAAM,CAACG,cAAP,CAAsBlB,gBAAgB,CAACc,SAAvC,EAAkD,iBAAlD,EAAqE;EACnEK,YAAY,EAAE,KADqD;EAEnEC,QAAQ,EAAE,KAFyD;EAGnEC,KAAK,EAAE;AAH4D,CAArE;AAMAN,MAAM,CAACG,cAAP,CAAsBlB,gBAAgB,CAACc,SAAvC,EAAkD,yBAAlD,EAA6E;EAC3EK,YAAY,EAAE,KAD6D;EAE3EC,QAAQ,EAAE,KAFiE;EAG3EC,KAAK,EAAE;AAHoE,CAA7E;;AAMA,KAAK,MAAMC,CAAX,IAAgB3B,YAAY,CAACmB,SAA7B,EAAwC;EACtCd,gBAAgB,CAACsB,CAAD,CAAhB,GAAsB3B,YAAY,CAACmB,SAAb,CAAuBQ,CAAvB,CAAtB;AACD;AAED;AACA;AACA;;;AAEAtB,gBAAgB,CAACc,SAAjB,CAA2BJ,SAA3B,GAAuC,UAASL,KAAT,EAAgB;EACrD,KAAKkB,OAAL,GAAelB,KAAf;;EAEA,IAAI,KAAKmB,GAAL,IAAY,IAAZ,IAAoB,KAAKA,GAAL,CAASC,eAAT,IAA4B,IAApD,EAA0D;IACxD,MAAMC,IAAI,GAAGX,MAAM,CAACW,IAAP,CAAY,KAAKF,GAAL,CAASC,eAAT,CAAyBE,MAArC,CAAb;;IACA,KAAK,MAAMC,GAAX,IAAkBF,IAAlB,EAAwB;MACtB,KAAKG,UAAL,CAAgBD,GAAhB,EAAqB,KAAKJ,GAAL,CAASC,eAAT,CAAyBE,MAAzB,CAAgCC,GAAhC,CAArB;IACD;EACF;AACF,CATD;AAWA;AACA;AACA;;;AAEA5B,gBAAgB,CAACc,SAAjB,CAA2BgB,QAA3B,GAAsC,YAAW;EAC/C,MAAM,IAAIC,KAAJ,CAAU,4DACd,sDADc,GAEd,8BAFI,CAAN;AAGD,CAJD;AAMA;AACA;AACA;;;AAEA/B,gBAAgB,CAACc,SAAjB,CAA2BkB,mBAA3B,GAAiD,YAAW;EAC1D,MAAMC,GAAG,GAAG,KAAKC,IAAL,CAAUD,GAAtB;;EACA,IAAI,CAACA,GAAL,EAAU;IACR,MAAM,IAAIF,KAAJ,CAAU,+CACd,mDADI,CAAN;EAED;;EACD,KAAKxB,aAAL,CAAmB4B,IAAnB,CAAwB;IAAEF,GAAG,EAAEA;EAAP,CAAxB;AACD,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAjC,gBAAgB,CAACc,SAAjB,CAA2BsB,WAA3B,GAAyC,UAASC,IAAT,EAAeC,SAAf,EAA0B;EACjE,IAAI,KAAKf,OAAL,IAAgB,IAApB,EAA0B;IACxB,OAAO,IAAP;EACD;;EACD,IAAI,CAAC,KAAKC,GAAL,CAASe,QAAd,EAAwB;IACtB,KAAKC,aAAL;EACD;;EAED,IAAIF,SAAJ,EAAe;IACb,OAAOD,IAAI,GACT,KAAKb,GAAL,CAASe,QAAT,GAAoB,GAApB,GAA0BF,IADjB,GAET,KAAKb,GAAL,CAASe,QAFX;EAGD;;EAED,OAAOF,IAAI,GACT,KAAKb,GAAL,CAASe,QAAT,GAAoB,GAApB,GAA0B,KAAKhB,OAA/B,GAAyC,GAAzC,GAA+Cc,IADtC,GAET,KAAKb,GAAL,CAASe,QAAT,GAAoB,GAApB,GAA0B,KAAKhB,OAFjC;AAGD,CAjBD;AAmBA;AACA;AACA;AACA;;;AAEAvB,gBAAgB,CAACc,SAAjB,CAA2B2B,uBAA3B,GAAqD,UAASJ,IAAT,EAAeC,SAAf,EAA0B;EAC7E,IAAI,KAAKf,OAAL,IAAgB,IAApB,EAA0B;IACxB,OAAO,IAAP;EACD;;EACD,IAAIe,SAAJ,EAAe;IACb,OAAOD,IAAI,IAAI,IAAR,GAAe,KAAK9B,aAAL,CAAmBmC,KAAnB,EAAf,GAA4C,KAAKnC,aAAL,CAAmBmC,KAAnB,KAA6B,GAA7B,GAAmCL,IAAtF;EACD;;EACD,IAAIA,IAAI,IAAI,IAAZ,EAAkB;IAChB,OAAO,KAAK9B,aAAL,CAAmBmC,KAAnB,KAA6B,GAA7B,GAAmC,KAAKnB,OAA/C;EACD;;EACD,OAAO,KAAKhB,aAAL,CAAmBmC,KAAnB,KAA6B,GAA7B,GAAmC,KAAKnB,OAAxC,GAAkD,GAAlD,GAAwDc,IAA/D;AACD,CAXD;AAaA;AACA;AACA;;;AAEArC,gBAAgB,CAACc,SAAjB,CAA2BN,OAA3B,GAAqC,YAAW;EAC9C,OAAO,KAAKT,mBAAL,CAAP;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAC,gBAAgB,CAACc,SAAjB,CAA2B6B,WAA3B,GAAyC,YAAW;EAClD,OAAO,KAAKpC,aAAZ;AACD,CAFD;AAIA;AACA;AACA;;;AAEAqC,MAAM,CAACC,OAAP,GAAiB7C,gBAAjB"},"metadata":{},"sourceType":"script"}