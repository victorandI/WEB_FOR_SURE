{"ast":null,"code":"'use strict';\n\nconst each = require('../helpers/each');\n/*!\n * ignore\n */\n\n\nmodule.exports = function (schema) {\n  const unshift = true;\n  schema.s.hooks.pre('remove', false, function (next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n\n    const _this = this;\n\n    const subdocs = this.$getAllSubdocs();\n    each(subdocs, function (subdoc, cb) {\n      subdoc.$__remove(cb);\n    }, function (error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('remove:error', _this, [_this], {\n          error: error\n        }, function (error) {\n          next(error);\n        });\n      }\n\n      next();\n    });\n  }, null, unshift);\n};","map":{"version":3,"names":["each","require","module","exports","schema","unshift","s","hooks","pre","next","$isSubdocument","_this","subdocs","$getAllSubdocs","subdoc","cb","$__remove","error","$__schema","execPost"],"sources":["B:/web_project_react/web_car_react/node_modules/mongoose/lib/plugins/removeSubdocs.js"],"sourcesContent":["'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('remove', false, function(next) {\n    if (this.$isSubdocument) {\n      next();\n      return;\n    }\n\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n\n    each(subdocs, function(subdoc, cb) {\n      subdoc.$__remove(cb);\n    }, function(error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('remove:error', _this, [_this], { error: error }, function(error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};\n"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAD,CAApB;AAEA;AACA;AACA;;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,MAAT,EAAiB;EAChC,MAAMC,OAAO,GAAG,IAAhB;EACAD,MAAM,CAACE,CAAP,CAASC,KAAT,CAAeC,GAAf,CAAmB,QAAnB,EAA6B,KAA7B,EAAoC,UAASC,IAAT,EAAe;IACjD,IAAI,KAAKC,cAAT,EAAyB;MACvBD,IAAI;MACJ;IACD;;IAED,MAAME,KAAK,GAAG,IAAd;;IACA,MAAMC,OAAO,GAAG,KAAKC,cAAL,EAAhB;IAEAb,IAAI,CAACY,OAAD,EAAU,UAASE,MAAT,EAAiBC,EAAjB,EAAqB;MACjCD,MAAM,CAACE,SAAP,CAAiBD,EAAjB;IACD,CAFG,EAED,UAASE,KAAT,EAAgB;MACjB,IAAIA,KAAJ,EAAW;QACT,OAAON,KAAK,CAACO,SAAN,CAAgBZ,CAAhB,CAAkBC,KAAlB,CAAwBY,QAAxB,CAAiC,cAAjC,EAAiDR,KAAjD,EAAwD,CAACA,KAAD,CAAxD,EAAiE;UAAEM,KAAK,EAAEA;QAAT,CAAjE,EAAmF,UAASA,KAAT,EAAgB;UACxGR,IAAI,CAACQ,KAAD,CAAJ;QACD,CAFM,CAAP;MAGD;;MACDR,IAAI;IACL,CATG,CAAJ;EAUD,CAnBD,EAmBG,IAnBH,EAmBSJ,OAnBT;AAoBD,CAtBD"},"metadata":{},"sourceType":"script"}